import{T as j,r as g,s as D,o as y,c as k,a as t,f as s,g as i,k as f,t as l,A as M,u as r,j as O,F as B,i as N,h as A,n as C,m as U}from"./app-586cbc19.js";import z from"./Layout-7435ca5d.js";import{t as V}from"./FormSelect-4a83dbbc.js";import{d as E}from"./vuedraggable.umd-7819a83d.js";import{_ as Z}from"./Modal-a35cf5fb.js";import{_ as T}from"./FormInput-bee1ab8e.js";import{_ as L}from"./AlertModal-511f2bfb.js";import{u as R}from"./useAlertModal-e2360484.js";import{P as H}from"./Pagination-834739c7.js";import{a as P,_,T as q}from"./TableHeaderRowItem-aa192b53.js";import{_ as I}from"./Dropdown-5b156d2f.js";import{_ as G,a as F}from"./DropdownItem-659d2267.js";import"./App-b210138e.js";import"./Sidebar-c20edeb2.js";import"./Menu-dd50bd69.js";import"./ProfileModal-e2807503.js";import"./FormPhoneInput-c57cb35b.js";import"./hidden-bc07d1fe.js";import"./use-text-value-a2f8b922.js";import"./transition-c0d64afd.js";import"./LangToggle-e8dc491d.js";import"./index-a65940f1.js";import"./MobileSidebar-68e85834.js";/* empty css              */import"./_plugin-vue_export-helper-c27b6911.js";import"./use-tree-walker-a3121160.js";const J={class:"bg-slate-100 md:bg-slate-50 rounded-[0.5rem]"},K={class:"w-full"},Q={class:"hover:bg-slate-50 md:border-b-0 md:border-t border-[#d1d5db] text-sm"},W={class:"pl-4 py-4"},X={class:"flex"},Y={class:"pl-2 py-2 pb-2"},tt={class:"align-middle text-sm text-slate-700"},et={class:"pl-2 py-2 pb-2 capitalize"},st={class:"pl-2 py-2 pb-2 capitalize"},ot={class:"pr-4 float-right"},lt={__name:"TagTable",props:{rows:{type:Object,required:!0}},emits:["edit","delete"],setup(b,{emit:w}){const u=b,{isOpenAlert:p,openAlert:m,confirmAlert:v}=R(),c=w,a=j({test:null});function h(e){c("edit",e)}const $=e=>{a.delete("/settings/tags/"+e)};u.rows.data;const x=g(!1);D(()=>x.value?"under drag":"");const o=e=>new Date(e).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return(e,n)=>(y(),k(B,null,[t("div",null,[t("div",J,[t("table",K,[s(q,null,{default:i(()=>[s(P,null,{default:i(()=>[s(_,{position:"first",class:"pl-2 py-2 pb-2"},{default:i(()=>[f(l(e.$t("Name")),1)]),_:1}),s(_,{class:"pl-2 py-2 pb-2"},{default:i(()=>[f(l(e.$t("Color")),1)]),_:1}),s(_,{class:"pl-2 py-2 pb-2"},{default:i(()=>[f(l(e.$t("Created")),1)]),_:1}),s(_,{class:"pl-2 py-2 pb-2"},{default:i(()=>[f(l(e.$t("Usage")),1)]),_:1}),s(_,{position:"last",class:"pl-2 py-2 pb-2"})]),_:1})]),_:1}),s(r(E),{tag:"tbody",list:b.rows.data,handle:".handle",clone:!1,"item-key":"id"},{item:i(({element:d,index:$t})=>[t("tr",Q,[t("td",W,[t("div",X,[t("div",null,l(d.name),1)])]),t("td",Y,[t("span",{class:"inline-block w-4 h-4 rounded-full mr-2 align-middle",style:M({backgroundColor:d.color})},null,4),t("span",tt,l(d.color),1)]),t("td",et,l(o(d.created_at)),1),t("td",st,l(d.contact_tag_count),1),t("td",ot,[s(I,{align:"right",class:"mt-2"},{items:i(()=>[s(G,null,{default:i(()=>[s(F,{as:"button",onClick:S=>h(d.id)},{default:i(()=>[f(l(e.$t("Edit")),1)]),_:1},8,["onClick"]),s(F,{as:"button",onClick:S=>r(m)(d.id)},{default:i(()=>[f(l(e.$t("Delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),default:i(()=>[n[2]||(n[2]=t("button",{class:"inline-flex w-full justify-center rounded-md text-sm font-medium text-black hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},[t("span",{class:"hover:bg-[#F6F7F9] hover:rounded-full w-[fit-content] p-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M12 16a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2Z"})])])],-1))]),_:2},1024)])])]),_:1},8,["list"])])]),s(H,{class:"mt-3",pagination:b.rows.meta},null,8,["pagination"])]),s(L,{modelValue:r(p),"onUpdate:modelValue":n[0]||(n[0]=d=>O(p)?p.value=d:null),onConfirm:n[1]||(n[1]=()=>r(v)($)),label:e.$t("Delete row"),description:e.$t("Are you sure you want to delete this row? This action can not be undone")},null,8,["modelValue","label","description"])],64))}},at={class:"md:h-[90vh]"},it={class:"flex justify-center items-center"},nt={class:"md:w-[60em]"},rt={class:"bg-white border border-slate-200 rounded-lg py-2 text-sm mb-4 pb-4 px-4 mb-20"},dt={class:"w-full py-2 mb-2 mt-2"},ut={class:"flex w-full mb-4"},mt={class:"text-md"},ct={class:"text-[16px]"},pt={class:"flex items-center mt-1 text-slate-500"},ft={class:"ml-auto"},gt={class:"w-5/5"},bt={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},vt={class:"grid grid-cols gap-y-4"},_t={class:"mt-4 flex"},ht=["disabled"],yt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},wt={key:1},Kt={__name:"Tag",props:{rows:Object,filters:Object,settings:Object},setup(b){const w=b,u=g(!1),p=g("Add Contact Field"),m=g("/settings/tags"),v=g("post"),c=g(!1),a=j({name:null,color:null}),h=(o,e={})=>{p.value=V("Add tag field"),m.value="/settings/tags",v.value="post",o!=null?(p.value=V("Edit tag field"),m.value="/settings/tags/"+o+"/edit",v.value="put",$()):(a.name=null,a.color=null,u.value=!0)};function $(){U.get(m.value).then(o=>{const{data:e}=o;e.item&&(m.value="/settings/tags/"+e.item.id,a.name=e.item.name,a.color=e.item.color),u.value=!0}).catch(o=>{})}const x=async()=>{c.value=!0,v.value=="post"?a.post(m.value,{preserveScroll:!0,onFinish:()=>{c.value=!1},onSuccess:()=>{u.value=!1}}):a.put(m.value,{preserveScroll:!0,onFinish:()=>{c.value=!1},onSuccess:()=>{u.value=!1}})};return(o,e)=>(y(),N(z,null,{default:i(()=>[t("div",at,[t("div",it,[t("div",nt,[t("div",rt,[t("div",dt,[t("div",ut,[t("div",mt,[t("h4",ct,l(o.$t("Tag")),1),t("span",pt,l(o.$t("Create Tag workflow in your conversations")),1)]),t("div",ft,[t("button",{onClick:e[0]||(e[0]=n=>h()),class:"float-right rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},l(o.$t("Add tags")),1)])]),t("div",gt,[s(lt,{rows:w.rows,onEdit:h,onDelete:o.openAlert},null,8,["rows","onDelete"])])])])])])]),s(Z,{label:p.value,isOpen:u.value},{default:i(()=>[t("div",bt,[t("form",{onSubmit:e[4]||(e[4]=A(n=>x(),["prevent"])),class:"gap-y-4"},[t("div",vt,[s(T,{modelValue:r(a).name,"onUpdate:modelValue":e[1]||(e[1]=n=>r(a).name=n),name:o.$t("Label"),error:r(a).errors.name,type:"text",class:C("col-span-6")},null,8,["modelValue","name","error"]),s(T,{modelValue:r(a).color,"onUpdate:modelValue":e[2]||(e[2]=n=>r(a).color=n),name:o.$t("Color"),error:r(a).errors.color,type:"color",class:C("col-span-6")},null,8,["modelValue","name","error"])]),t("div",_t,[t("button",{type:"button",onClick:e[3]||(e[3]=A(n=>u.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},l(o.$t("Cancel")),1),t("button",{class:C(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":c.value}]),disabled:c.value},[c.value?(y(),k("svg",yt,[...e[5]||(e[5]=[t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)])])):(y(),k("span",wt,l(o.$t("Save")),1))],10,ht)])],32)])]),_:1},8,["label","isOpen"])]),_:1}))}};export{Kt as default};
