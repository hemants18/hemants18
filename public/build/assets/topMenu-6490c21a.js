import{o as _,c as L,a as u,q as w,r as x,H as C,z as N,w as I,v as M,f as v,u as k,n as V}from"./app-71688fef.js";import{u as B}from"./vue-flow-core-436bf019.js";import{T as z}from"./TrashIcon-bc49cd17.js";import{g as n}from"./radomId-aebfd87c.js";import{u as A}from"./main-6cecb8e9.js";const O={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-clipboard"};function j(s,o){return _(),L("svg",O,[...o[0]||(o[0]=[u("path",{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"},null,-1),u("path",{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"},null,-1)])])}const D={render:j};let a=0;const Y=(s,o,y,i,d=null)=>{var b;let c=n();a++;let l=(b=s.dataTransfer)==null?void 0:b.getData("application/vueflow");l||(l=d);const p=y({x:s.clientX-450,y:s.clientY-20});let t={id:l+c,type:l,position:p,label:`${l} node`};switch(l){case"starter-box":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"starter-box",label:"Label",matching_types:"exacts",keyword:"",title:"Start Bot flow",text:"Text",subtitle:"Subtitle",color:"#000000",position:a})});break;case"box-with-title":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"box-with-title",label:"Label",title:"Message",text:"",title_duration:0,subtitle:"Subtitle",color:"#000000",position:a})});break;case"node-image":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"node-image",label:"Label",title:"Image",src:"",image_duration:0,image:"",width:"340px",height:"240px",color:"#000000",position:a})});break;case"box-with-audio":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"box-with-audio",label:"Label",title:"Audio",audio_duration:0,audio:"",subtitle:"Subtitle",color:"#000000",position:a})});break;case"box-with-video":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"box-with-video",label:"Label",title:"Video",video_duration:0,video:"",subtitle:"Subtitle",color:"#000000",position:a})});break;case"box-with-file":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"box-with-file",label:"Label",title:"Document",file_duration:0,file:"",subtitle:"Subtitle",color:"#000000",position:a})});break;case"box-with-location":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"box-with-location",label:"Label",title:"Location",location_duration:0,latitude:"",longitude:"",address_name:"",address:"",color:"#000000",position:a})});break;case"box-with-button":i.$patch(e=>{e.layers.messages.push({id:t.id,title:"Button Message",type:"box-with-button",header_media_type:"",header_text:"",header_media:"",footer_text:"",button_message:"",button_duration:0,items:[{id:n(),type:"button",text:""},{id:n(),type:"button",text:""},{id:n(),type:"button",text:""}],color:"#000000",position:a})});break;case"starting-step":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"starting-step",label:"Label",keyword:"",matching_types:"",content:"Type",color:"#ffffff",items:[],position:a})});break;case"box-with-flow":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"box-with-flow",title:"Flow",flow_id:"",flow_name:"",color:"#ffffff",position:a})});break;case"container":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"container",label:"Label",width:"20rem",height:"10rem",color:"#3A8CC7"})});break;case"redirector":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"redirector",label:"Label",color:"#000000"})});break;case"box-with-template":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"box-with-template",label:"Label",title:"Template",template_id:"",subtitle:"Subtitle",template_variables:{},color:"#000000",position:a})});break;case"box-with-condition":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"box-with-condition",label:"Label",title:"Condition",match_type:"",condition_fields:[{variable:"",operator:"",value:""}],subtitle:"Subtitle",color:"#000000",position:a})});break;case"box-with-list":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"box-with-list",label:"Interactive List",title:"Interactive List",match_type:"",header_text:"Interactive header text",text_message:"",header_type:"",header_media:"",color:"#000000",button_text:"Button Text",section_title:"Section Title",items:[{id:n(),type:"list",title:"Enter List title",text:"Enter List Text",subtitle:"Enter List subtitle"},{id:n(),type:"list",title:"Enter List title",text:"Enter List Text",subtitle:"Enter List subtitle"},{id:n(),type:"list",title:"Enter List title",text:"Enter List Text",subtitle:"Enter List subtitle"}],position:a})});break;case"box-with-interactive-button":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"box-with-interactive-button",label:"Label",title:"",subtitle:"Subtitle",color:"#000000",position:a})});break;case"box-with-interactive-section":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"box-with-interactive-section",label:"Label",title:"",subtitle:"Subtitle",color:"#000000",position:a})});break;case"box-with-interactive-row":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"box-with-interactive-row",label:"Label",title:"",description:"",subtitle:"Subtitle",color:"#000000",position:a})});break;case"facebook-message":i.$patch(e=>{e.layers.messages.push({id:t.id,type:"facebook-message",label:"Label",color:"#ffffff",items:[{id:n(),type:"messengerTextVue",text:"Enter Message Text",buttons:[]}]})});break}return!d&&s.target.parentNode.id.substring(-1,9)==="container"&&(t.parentNode=s.target.parentNode.id),o([t]),t},H=(s,o,y,i)=>{let d=n();const c=y.value(o),l=c.type,p={...c.position,x:c.position.x+50,y:c.position.y-50};i.$patch(t=>{const b=t.layers.messages.filter(e=>e.id===o);t.layers.messages=[...t.layers.messages,{...JSON.parse(JSON.stringify(b))[0],id:l+d}]}),s([{id:l+d,type:l,position:p,label:`${l} node`}])},F={__name:"topMenu",props:{eid:String,transparent:Boolean},setup(s){const o=A(),{addNodes:y,applyEdgeChanges:i,applyNodeChanges:d,getNode:c,toObject:l}=B(),p=w(()=>o.getMessageById(f.eid));w(()=>o.getMessages());const t=(h,r)=>{h.stopPropagation();const E=l().edges.filter(m=>[m.target,m.source].some(T=>T===r)).map(m=>({type:"remove",id:m.id}));d([{type:"remove",id:r}]),i(E),o.layers.messages=o.layers.messages.filter(m=>m.id!==r)},b=x(null),e=()=>{b.value.click()},$=x(!0);x(null),x(null);const f=s;C(()=>f.transparent,h=>{h===!0&&($.value=!0)});const S=h=>{H(y,h,c,o)};return(h,r)=>(_(),L("div",{class:V(["button-menu-container",{transparent:s.transparent}])},[u("div",null,[u("span",{class:"color-input",style:N({backgroundColor:p.value.color}),onClick:e},[I(u("input",{ref_key:"colorInput",ref:b,type:"color",class:"container-color","onUpdate:modelValue":r[0]||(r[0]=g=>p.value.color=g)},null,512),[[M,p.value.color]])],4)]),u("div",{onClick:r[1]||(r[1]=g=>t(g,s.eid))},[v(k(z),{class:"text-danger"})]),u("div",{onClick:r[2]||(r[2]=()=>S(s.eid))},[v(k(D))])],2))}},G=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{F as _,Y as c,G as t};
