import{p as F,r as I,K as ge,m as ye,q as $,x as we,i as xe,g as f,s as L,o as n,a as t,t as i,f as _,k as U,a5 as W,a6 as Z,u as k,w as m,a0 as $e,c as d,v as h,am as K,b as g,F as T,e as C,n as P,ad as q}from"./app-71688fef.js";import{u as Ve,a as ke}from"./vue-flow-core-436bf019.js";import{_ as Te,a as Ce}from"./vue-flow-controls-e2103ca9.js";import{_ as Ue}from"./vue-flow-minimap-06aa8dc9.js";import{g as Fe,s as z}from"./globalMenu-f1480a0b.js";import Se from"./boxWithTitle-b06f4169.js";import Pe from"./boxWithStarter-dd30a11b.js";import Me from"./imageContainer-c7f0b655.js";import Be from"./boxWithAudio-81b2ed03.js";import je from"./boxWithVideo-96ec75b7.js";import De from"./boxWithFile-0489ebf8.js";import Ee from"./boxTemplate-6ed38b65.js";import Ne from"./boxWithLocation-af2df676.js";import He from"./boxWithCondition-3875756b.js";import Ie from"./boxWithInteractive-9fd85f5c.js";import Re from"./boxWithButton-41961a60.js";import{d as J,u as Qe}from"./main-6cecb8e9.js";import"./vue3-smooth-dnd.esm-5bbd00d4.js";/* empty css                                                                      *//* empty css                                                                      *//* empty css                                                                       *//* empty css                                                                       *//* empty css                                                                       *//* empty css                                                                      *//* empty css                                                                       *//* empty css                                                                           *//* empty css                                                                         */import{c as j}from"./topMenu-6490c21a.js";import{g as A}from"./helper-be46376f.js";/* empty css                                                                        */import Le from"./boxFlow-688f7e16.js";import qe from"./FlowModal-c3d75d10.js";import ze from"./redirectorEdge-5dc4848e.js";import Ae from"./CustomConnectionLine-204debd9.js";import Oe from"./customEdge-fe00f39f.js";/* empty css                                                                          */import Xe from"./App-dbd17314.js";import"./Sidebar-775dd4c3.js";import"./SidebarTemplate-22be80cd.js";import"./loading_btn-4d0c29eb.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-e82fb76e.js";/* empty css              */import"./radomId-aebfd87c.js";import"./TrashIcon-bc49cd17.js";import"./transition-69c2c596.js";import"./hidden-1e440d84.js";import"./Sidebar-4facdee5.js";import"./Menu-51e1dddd.js";import"./Modal-0745b486.js";import"./ProfileModal-a0ead7b3.js";import"./FormInput-20df0373.js";import"./FormSelect-4c8a2141.js";import"./use-text-value-42fe46f0.js";import"./MobileSidebar-11af113e.js";const G=A(),Ye=J("templateStore",{state:()=>({templates:[],loading:!1,error:null,currentPage:1,lastPage:1,searchQuery:""}),actions:{async fetchTemplates(c=1,s=""){this.loading=!0,this.currentPage=c,this.searchQuery=s;try{const p=G.getUrl("whatsapp-templates?flow_builder=1"),y=await F.get(p,{params:{page:this.currentPage,search:this.searchQuery}});this.templates=y.data.templates,this.lastPage=y.data.last_page}catch(p){this.error=p}finally{this.loading=!1}},async loadMoreTemplates(){if(this.currentPage<this.lastPage){this.currentPage++;try{const c=G.getUrl("whatsapp-templates"),s=await F.get(c,{params:{page:this.currentPage,search:this.searchQuery}});this.templates=[...this.templates,...s.data.data]}catch(c){this.error=c}}},async searchTemplates(c){this.currentPage=1,this.templates=[],await this.fetchTemplates(1,c)},async fetchTemplate(c){this.loading=!0;try{const s=await F.get(`/api/templates/${c}`);this.template=s.data}catch(s){this.error=s}finally{this.loading=!1}}}}),We=A();class Ze{getFlows(s=1,p=""){let y=We.getUrl("flow-builder/list");return F.get(y,{params:{page:s,search:p}})}addFlow(s){return F.post("/api/flows",s)}updateFlow(s){return F.put(`/api/flows/${s.id}`,s)}deleteFlow(s){return F.delete(`/api/flows/${s}`)}getFlowById(s){return F.get(`/api/flows/${s}`)}}const E=new Ze,Ke=J("flow",{state:()=>({flows:[],selectedFlow:null,error:null,loading:!1,pagination:{currentPage:1,totalPages:1,perPage:10},searchQuery:""}),getters:{allFlows:c=>c.flows,isLoading:c=>c.loading,hasError:c=>c.error!==null},actions:{fetchFlows({page:c=1,searchQuery:s=""}){return this.loading=!0,this.searchQuery=s,E.getFlows(c,s).then(p=>(console.log(p.data.flows.data),this.flows=p.data.flows,this.pagination.currentPage=p.data.current_page,this.pagination.totalPages=p.data.last_page,this.error=null,Promise.resolve(p))).catch(p=>(this.error=p,Promise.reject(p))).finally(()=>{this.loading=!1})},addFlow(c){return E.addFlow(c).then(s=>(this.flows.push(s.data),Promise.resolve(s))).catch(s=>(this.error=s,Promise.reject(s)))},updateFlow(c){return E.updateFlow(c).then(s=>{const p=this.flows.findIndex(y=>y.id===c.id);return p!==-1&&(this.flows[p]=s.data),Promise.resolve(s)}).catch(s=>(this.error=s,Promise.reject(s)))},deleteFlow(c){return E.deleteFlow(c).then(()=>(this.flows=this.flows.filter(s=>s.id!==c),Promise.resolve())).catch(s=>(this.error=s,Promise.reject(s)))},fetchFlowById(c){return this.loading=!0,E.getFlowById(c).then(s=>(this.selectedFlow=s.data,Promise.resolve(s))).catch(s=>(this.error=s,Promise.reject(s))).finally(()=>{this.loading=!1})},setCurrentPage(c){this.pagination.currentPage=c,this.fetchFlows({page:c,searchQuery:this.searchQuery})},setSearchQuery(c){this.searchQuery=c,this.fetchFlows({page:1,searchQuery:c})}}}),Ge={class:"bg-black md:bg-inherit pt-10 px-4 md:pt-8 md:p-8 rounded-[5px] text-[#000] h-full md:overflow-y-auto"},Je={class:"flex justify-between"},et={class:"text-xl mb-1"},tt={class:"mb-6 flex items-center text-sm leading-6 text-gray-600"},ot={class:"ml-1 mt-1"},lt={id:"allTheNav"},at={class:"flowBuilder__inner d-flex",style:{height:"84vh"}},it={class:"m-1 border",id:"vue_flow",oncontextmenu:"return false;",style:{position:"relative"}},st={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},nt={class:"offcanvas-body !p-0"},dt={key:0},rt={class:"trigger-trigger-keyword-group trigger-onDemand-field mb-3 text-left mt-2"},ut={for:"trigger-trigger-keyword"},ct=["placeholder"],mt={class:"card_content"},_t={class:"mb-3"},pt={for:"matching_type",class:"d-block !text-[16px] !mb-2"},ht={class:"flex_input !p-0",style:{border:"none"}},ft={class:"inline-flex items-center"},bt={class:"relative flex items-center cursor-pointer"},vt={class:"ml-2 text-slate-600 cursor-pointer text-sm !mb-3",for:"exacts"},gt={class:"inline-flex items-center"},yt={class:"relative flex items-center cursor-pointer",for:"html"},wt={class:"ml-2 text-slate-600 cursor-pointer text-sm !mb-3",for:"contains"},xt={key:1},$t={class:"mb-3"},Vt={for:""},kt=["placeholder"],Tt={class:"mb-3"},Ct={for:""},Ut=["placeholder"],Ft={class:"d-block"},St={key:2},Pt={class:"mb-3"},Mt={for:""},Bt=["placeholder"],jt={class:"mb-3"},Dt={for:""},Et={class:""},Nt=["src"],Ht={key:3},It={class:"mb-3"},Rt={for:""},Qt={class:"mb-3"},Lt={for:""},qt={class:""},zt={key:0,style:{"margin-top":"20px"}},At={style:{margin:"0"}},Ot={id:"audio"},Xt=["src"],Yt={key:4},Wt={class:"mb-3"},Zt={for:""},Kt=["placeholder"],Gt={class:"mb-3"},Jt={for:""},eo={class:""},to={key:0,style:{"margin-top":"20px"}},oo={style:{margin:"0"}},lo={id:"video"},ao=["src"],io={key:5},so={class:"mb-3"},no={for:""},ro=["placeholder"],uo={class:"mb-3"},co={for:""},mo={class:""},_o={key:0,style:{"margin-top":"20px"}},po={style:{margin:"0"}},ho=["src"],fo={key:6},bo={class:""},vo={class:"mb-3"},go=["placeholder"],yo={class:"mb-3"},wo=["placeholder"],xo={class:"mb-3"},$o=["placeholder"],Vo={class:"border-bottoms"},ko={class:"button__wrapper-bg"},To={class:"button__group"},Co={class:"mb-3"},Uo=["onUpdate:modelValue","placeholder"],Fo={class:"button__grid"},So={class:"mb-3"},Po=["onUpdate:modelValue","placeholder"],Mo={class:"mb-3"},Bo=["onUpdate:modelValue","placeholder"],jo=["onClick"],Do={class:"btn__groups"},Eo=["onClick"],No=["onClick"],Ho={key:7},Io={class:"mb-3"},Ro=["placeholder"],Qo={class:"mb-3"},Lo={key:0},qo=["maxlength"],zo={id:"headerCharCount",class:"text-muted"},Ao={class:"mb-3"},Oo=["placeholder","maxlength"],Xo={id:"messageCharCount",class:"text-muted text-alert"},Yo={class:"button__wrapper"},Wo={class:"button__group"},Zo={class:"button__grid"},Ko=["placeholder","onInput","onUpdate:modelValue","maxlength"],Go={id:"buttonCharCount{{ index }}",class:"text-muted"},Jo={class:"mb-3"},el={key:0},tl=["placeholder","maxlength"],ol={id:"footerCharCount",class:"text-muted"},ll={key:8},al={class:"mb-3"},il={for:""},sl=["placeholder"],nl={class:"mb-3"},dl={for:""},rl=["placeholder"],ul={class:"mb-3"},cl={for:""},ml=["placeholder"],_l={class:"mb-3"},pl={for:""},hl=["placeholder"],fl={class:"mb-3"},bl={for:""},vl=["placeholder"],gl={key:9},yl={class:"mt-3 mb-1"},wl={class:"mb-3"},xl={for:""},$l={class:"mb-3"},Vl={for:""},kl={class:"mb-3"},Tl={for:""},Cl=["onUpdate:modelValue"],Ul={class:"mb-3"},Fl={for:""},Sl={class:"action_btn"},Pl={key:10,class:"form-group"},Ml=["value"],Bl={key:0,class:"my-2 mt-3"},jl={key:0,class:"v-section-title border-bottom pb-2 text-capitalize"},Dl={class:"col-sm-6 mb-3 match-value-select"},El={class:"form-label"},Nl=["name","onUpdate:modelValue"],Hl={value:"input_value"},Il={value:"contact_name"},Rl={value:"contact_phone"},Ql={class:"col-sm-6 mb-3 body-value-input"},Ll=["for"],ql=["data-target","id","name","placeholder","value","onUpdate:modelValue"],zl={key:1,class:"row"},Al={class:"col-12 mb-3"},Ol={class:"form-label",for:"document"},Xl={key:2,class:"row"},Yl={class:"col-12 mb-3"},Wl={class:"form-label",for:"header_image"},Zl={key:3,class:"row"},Kl={class:"col-12 mb-3"},Gl={class:"form-label",for:"video"},Jl={key:4},ea={key:0,class:"row"},ta={class:"col-6 mb-3 match-value-select"},oa={class:"form-label"},la=["name"],aa={value:"input_value"},ia={value:"contact_name"},sa={value:"contact_phone"},na={class:"col-6 mb-3 body-value-input"},da=["for"],ra=["data-target","id","name","placeholder","value"],ua={key:11,class:"form-group"},ca=["value"],pi={__name:"Create",setup(c){const s=A(),p=Qe(),y=Ye(),ee=I(""),R=I(!1),te=()=>{R.value=!0},oe=()=>{R.value=!1},{addEdges:Q,addNodes:M,onConnect:le,project:B,setInteractive:ma,onConnectStart:ae}=Ve();ae(l=>{if(l.handleId=="list_messages"){let b=l.event,V=j(b,M,B,p,"box-with-interactive-button"),x=j({clientX:V.position.x+800,clientY:V.position.y},M,B,p,"box-with-interactive-section");j({clientX:x.position.x+800,clientY:x.position.y},M,B,p,"box-with-interactive-row"),j({clientX:x.position.x+800,clientY:x.position.y+100},M,B,p,"box-with-interactive-row"),j({clientX:x.position.x+800,clientY:x.position.y+200},M,B,p,"box-with-interactive-row"),Q([{animated:!1,source:l.nodeId,sourceHandle:l.handleType,target:V.id,targetHandle:"left",type:"custom"}]),Q([{animated:!1,source:V.id,sourceHandle:"source",target:x.id,targetHandle:"left",type:"custom"}])}});const ie=l=>{l.preventDefault(),l.dataTransfer&&(l.dataTransfer.dropEffect="move")},se=l=>{j(l,M,B,p)};le(l=>{l.type="custom",l.animated=!1,Q([l])});const ne=l=>{l.node.type=="facebook-message"&&(D.value==l.node.id?D.value="":D.value=l.node.id),p.messageToEdit=D.value};let D=I("");const O=ge(),X=I([...O.props.nodes,...O.props.edges]),de=l=>{l.forEach(o=>{o.type=="remove"&&(p.layers.messages=p.layers.messages.filter(b=>b.id!=o.id))})},Y=()=>{if(e.template_id){const l=y.templates.find(o=>o.id===e.template_id);console.log(l==null?void 0:l.variables),e.selectedTemplate=l||null,e.selectedTemplate&&(e.templateVariables={},Object.keys(e.selectedTemplate.variables).forEach(o=>{e.templateVariables[o]={matches:{},values:{}},e.selectedTemplate.variables[o].forEach(b=>{e.templateVariables[o].matches[b.id]="input_value",e.templateVariables[o].values[b.id]=b.exampleValue||""})}))}else e.selectedTemplate=null,e.templateVariables={}},e=ye({flow_id:"",opened:!1,template_id:"",template_variables:{},templates:[],selectedTemplate:"",templateVariables:{},fetchTemplateVariables:Y,keyword:"",matching_types:"",text:"",description:"",text_duration:"",current_id:"",type:"",image:"",file_duration:"",image_duration:"",audio:"",audio_duration:"",video:"",video_duration:"",button_duration:"",delay:.2,contact_lists:[],segments:[],box_title:"",match_type:"",header_text:"",header_media_type:"",header_media:"",text_message:"",footer_text:"",button_text:"",button_message:"",location_duration:0,latitude:"",longitude:"",address_name:"",address:"",original_file_name:"",file_extension:"",searchQuery:"",variables:[],buttons:[],items:[{text:""},{text:""},{text:""}],condition_fields:[{variable:"",operator:"",value:""}],action:[{button:"",sections:{title:"",rows:[{id:"",title:"",description:""}]}}],condition_variable_options:[{label:"First Name",value:"first_name"},{label:"Last Name",value:"last_name"},{label:"Label",value:"label"},{label:"Email",value:"email"},{label:"Phone Number",value:"phone_number"}],condition_operator_options:[{label:"=",value:"equal"},{label:"<",value:"less_than"},{label:">",value:"greater_than"},{label:"≤",value:"less_than_or_equal"},{label:"≥",value:"greater_than_or_equal"},{label:"≠",value:"not_equal"},{label:"Contains",value:"contains"},{label:"Starts With",value:"starts_with"},{label:"Ends With",value:"ends_with"},{label:"Has Value",value:"has_value"}],limits:{headerText:60,buttonMessage:200,footerText:60,buttonText:20},headerCharCount:$(()=>e.header_text.length),messageCharCount:$(()=>e.text_message.length),footerCharCount:$(()=>e.footer_text.length),buttonCharCounts:$(()=>e.items.map(l=>l.text.length)),isHeaderTextInvalid:$(()=>e.header_text.length>e.limits.headerText),isButtonMessageInvalid:$(()=>e.text_message.length>e.limits.buttonMessage),isFooterTextInvalid:$(()=>e.footer_text.length>e.limits.footerText),isButtonTextInvalid:l=>{var o;return((o=e.items[l])==null?void 0:o.text.length)>e.limits.buttonText},validateHeaderText(){this.header_text=this.header_text.slice(0,this.limits.headerText)},validateButtonMessage(){this.text_message=this.text_message.slice(0,this.limits.buttonMessage)},validateFooterText(){this.footer_text=this.footer_text.slice(0,this.limits.footerText)},validateButtonText(l){l>=0&&l<this.items.length&&(this.items[l].text=this.items[l].text.slice(0,this.limits.buttonText))},handleInput(l,o){o>=0&&o<this.items.length&&(this.items[o].text=l.target.value.slice(0,this.limits.buttonText))}});$(()=>e.selectedTemplate?Object.entries(e.selectedTemplate.variables||{}).filter(([l,o])=>o!==void 0):[]);function re(){Array.isArray(e.action.sections)||(e.action.sections=[]),e.action.sections.length<3&&e.action.sections.push({title:"",rows:[{id:"",title:"",description:""}]})}function ue(l){e.action.sections.splice(l,1)}function ce(l){e.action.sections[l].rows.length<3&&e.action.sections[l].rows.push({id:"",title:"",description:""})}function me(l,o){e.action.sections[l].rows.splice(o,1)}function w(l){let o=l.args.value;if(e.type=o.type,e.current_id=o.id,e.box_title=o.title,e.type=="starter-box")e.keyword=o.keyword,e.matching_types=o.matching_types;else if(e.type=="box-with-title")e.text=o.text,e.text_duration=o.text_duration;else if(e.type=="node-image")e.image=o.image,e.image_duration=o.image_duration;else if(e.type=="box-with-audio"){e.audio=o.audio,e.audio_duration=o.audio_duration;const b=document.getElementById("audio");b&&(b.src=e.audio)}else if(e.type=="box-with-video"){e.video=o.video,e.video_duration=o.video_duration;const b=document.getElementById("video");b&&(b.src=e.video)}else e.type=="box-with-file"?(e.file=o.file,e.file_duration=o.file_duration):e.type=="box-with-location"?(e.latitude=o.latitude,e.longitude=o.longitude,e.location_duration=o.location_duration,e.address_name=o.address_name,e.address=o.address):e.type=="box-with-template"?e.template_id=o.template_id:e.type=="box-with-condition"?(e.match_type=o.match_type,e.condition_fields=o.condition_fields):e.type=="box-with-list"?(e.header_type=o.header_type,e.header_media_type=o.header_media_type,e.header_media=o.header_media,e.text_message=o.text_message):e.type=="box-with-button"?(e.items=o.items,e.button_duration=o.button_duration,e.button_message=o.button_message,e.duration=o.duration,e.header_text=o.header_text,e.footer_text=o.footer_text):e.type=="box-with-flow"&&(e.flow_id=o.flow_id,e.flow_name=o.flow_name,e.duration=o.duration);te()}async function N(l,o){let b=l.target.files[0];await _e(b,o)}async function _e(l,o){let b={headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2),"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}},V=new FormData;V.append("file",l),V.append("id",e.current_id),V.append("type",e.type);let x=s.getUrl("upload-files");await F.post(x,V,b).then(a=>{if(o=="audio"){e.audio=a.data.file_object.file;const r=document.getElementById("audio"),u=document.getElementById("audio_container");r.src=a.data.file_object.file,u.src=a.data.file_object.file}else if(o=="video"){e.video=a.data.file_object.file;const r=document.getElementById("video"),u=document.getElementById("video_container");r.src=a.data.file_object.file,u.src=a.data.file_object.file}else e[o]=a.data.file_object.file,e.file_extension=a.data.file_object.ext,console.log(a.data.file_object.ext)}).catch(a=>{})}function pe(){e.condition_fields.push({variable:"",operator:"",value:""})}function he(){e.condition_fields.pop()}we(()=>{y.fetchTemplates(),ve()}),$(()=>y.currentPage<y.lastPage);const H=Ke(),fe=$(()=>H.allFlows);$(()=>H.isLoading);const be=$(()=>H.pagination),ve=()=>{H.fetchFlows({page:be.value.currentPage,searchQuery:ee.value})};return(l,o)=>{const b=L("Link"),V=L("italic"),x=L("vue-plyr");return n(),xe(Xe,null,{default:f(()=>[t("div",Ge,[t("div",Je,[t("div",null,[t("h2",et,i(l.$t("Create Flow")),1),t("p",tt,[o[32]||(o[32]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),t("span",ot,i(l.$t("Create flow automation using your own criteria")),1)])]),t("div",null,[_(b,{href:"/automation/flows",class:"flex items-center space-x-4 rounded-md bg-indigo-600 px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},{default:f(()=>[o[33]||(o[33]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M5.841 5.28a.75.75 0 0 0-1.06-1.06L1.53 7.47L1 8l.53.53l3.25 3.25a.75.75 0 0 0 1.061-1.06l-1.97-1.97H24.25a.75.75 0 0 0 0-1.5H3.871l1.97-1.97Z","clip-rule":"evenodd"})],-1)),U(" "+i(l.$t("Back")),1)]),_:1})])]),t("div",lt,[t("div",at,[_(Fe),t("div",it,[_(k(ke),{modelValue:X.value,"onUpdate:modelValue":o[0]||(o[0]=a=>X.value=a),class:"customnodeflow","snap-to-grid":!0,"select-nodes-on-drag":!0,"only-render-visible-elements":!0,"default-viewport":{zoom:.5},"max-zoom":50,"min-zoom":.05,onDragover:ie,onDrop:se,onNodeDoubleClick:ne,onNodesChange:de},{"connection-line":f(({sourceX:a,sourceY:r,targetX:u,targetY:v})=>[_(Ae,{"source-x":a,"source-y":r,"target-x":u,"target-y":v},null,8,["source-x","source-y","target-x","target-y"])]),"edge-custom":f(a=>[_(Oe,W(Z(a)),null,16)]),"node-redirector":f(a=>[_(ze,W(Z(a)),null,16)]),"node-starter-box":f(a=>[_(Pe,{onDataSent:w,id:a.id,text:e.text,selected:a.selected,keyword:e.keyword,matching_types:e.matching_types,current_id:e.current_id},null,8,["id","text","selected","keyword","matching_types","current_id"])]),"node-box-with-title":f(a=>[_(Se,{onDataSent:w,id:a.id,selected:a.selected,text_duration:e.text_duration,text:e.text,current_id:e.current_id},null,8,["id","selected","text_duration","text","current_id"])]),"node-node-image":f(a=>[_(Me,{onDataSent:w,id:a.id,selected:a.selected,duration:e.image_duration,image:e.image,current_id:e.current_id},null,8,["id","selected","duration","image","current_id"])]),"node-box-with-audio":f(a=>[_(Be,{onDataSent:w,id:a.id,selected:a.selected,duration:e.audio_duration,audio:e.audio,current_id:e.current_id},null,8,["id","selected","duration","audio","current_id"])]),"node-box-with-video":f(a=>[_(je,{onDataSent:w,id:a.id,selected:a.selected,duration:e.video_duration,video:e.video,current_id:e.current_id},null,8,["id","selected","duration","video","current_id"])]),"node-box-with-button":f(a=>[_(Re,{onDataSent:w,id:a.id,selected:a.selected,header_text:e.header_text,footer_text:e.footer_text,button_duration:e.button_duration,items:e.items,button_message:e.button_message,current_id:e.current_id},null,8,["id","selected","header_text","footer_text","button_duration","items","button_message","current_id"])]),"node-box-with-file":f(a=>[_(De,{onDataSent:w,id:a.id,selected:a.selected,duration:e.file_duration,file:e.file,extension:e.file_extension,current_id:e.current_id},null,8,["id","selected","duration","file","extension","current_id"])]),"node-box-with-location":f(a=>[_(Ne,{onDataSent:w,id:a.id,selected:a.selected,location_duration:e.location_duration,address_name:e.address_name,address:e.address,latitude:e.latitude,longitude:e.longitude,current_id:e.current_id},null,8,["id","selected","location_duration","address_name","address","latitude","longitude","current_id"])]),"node-box-with-template":f(a=>[_(Ee,{onDataSent:w,id:a.id,selected:a.selected,template_id:e.template_id,template_variables:e.template_variables,current_id:e.current_id},null,8,["id","selected","template_id","template_variables","current_id"])]),"node-box-with-flow":f(a=>[_(Le,{onDataSent:w,id:a.id,selected:a.selected,flow_id:e.flow_id,flow_name:e.flow_name,current_id:e.current_id},null,8,["id","selected","flow_id","flow_name","current_id"])]),"node-box-with-condition":f(a=>[_(He,{onDataSent:w,id:a.id,selected:a.selected,current_id:e.current_id,match_type:e.match_type,condition_fields:e.condition_fields},null,8,["id","selected","current_id","match_type","condition_fields"])]),"node-box-with-list":f(a=>[_(Ie,{onDataSent:w,id:a.id,duration:e.duration,selected:a.selected,header_type:e.header_type,header_media:e.header_media,text_message:e.text_message,footer_text:e.footer_text,button_text:e.button_text,current_id:e.current_id},null,8,["id","duration","selected","header_type","header_media","text_message","footer_text","button_text","current_id"])]),default:f(()=>[_(k(Te),{"pattern-color":"grey",gap:"16",size:"1.2"}),_(k(Ce)),m(_(k(Ue),null,null,512),[[$e,k(D)===""]])]),_:1},8,["modelValue"])])])])]),_(qe,{isOpen:R.value,label:"Configure Node",onClose:oe},{default:f(()=>[t("div",st,[t("div",nt,[e.type=="starter-box"?(n(),d("div",dt,[t("div",rt,[t("label",ut,i(l.$t("write_down_the_keywords")),1),m(t("input",{type:"text",class:"form-control w-full mt-2",id:"trigger-trigger-keyword","aria-describedby":"trigger-trigger-keyword-help",placeholder:l.$t("hello_hi_start"),"onUpdate:modelValue":o[1]||(o[1]=a=>e.keyword=a)},null,8,ct),[[h,e.keyword]])]),t("div",mt,[t("div",_t,[t("label",pt,[U(i(l.$t("matching_type")),1),o[34]||(o[34]=t("span",{class:"text-danger"},"*",-1))]),t("div",ht,[t("div",ft,[t("label",bt,[m(t("input",{type:"radio",class:"peer h-5 w-5 cursor-pointer appearance-none rounded-full border border-slate-300 checked:border-slate-400 transition-all",name:"matching_types",id:"exacts",value:"exacts","onUpdate:modelValue":o[2]||(o[2]=a=>e.matching_types=a),checked:""},null,512),[[K,e.matching_types]]),o[35]||(o[35]=t("span",{class:"absolute bg-slate-800 w-3 h-3 rounded-full opacity-0 peer-checked:opacity-100 transition-opacity duration-200 top-[42%] left-1/2 transform -translate-x-1/2 -translate-y-1/2"},null,-1))]),t("label",vt,i(l.$t("exact_keyword_match")),1)]),t("div",gt,[t("label",yt,[m(t("input",{type:"radio",class:"peer h-5 w-5 cursor-pointer appearance-none rounded-full border border-slate-300 checked:border-slate-400 transition-all",name:"matching_types",id:"contains",value:"contains","onUpdate:modelValue":o[3]||(o[3]=a=>e.matching_types=a)},null,512),[[K,e.matching_types]]),o[36]||(o[36]=t("span",{class:"absolute bg-slate-800 w-3 h-3 rounded-full opacity-0 peer-checked:opacity-100 transition-opacity duration-200 top-[42%] left-1/2 transform -translate-x-1/2 -translate-y-1/2"},null,-1))]),t("label",wt,i(l.$t("contain")),1)])])])])])):g("",!0),e.type=="box-with-title"?(n(),d("div",xt,[t("div",$t,[t("label",Vt,i(l.$t("delay_in_reply"))+" ("+i(l.$t("in_sec"))+")",1),m(t("input",{type:"number",class:"form-control w-full mt-2",placeholder:l.$t("e_g_10"),"onUpdate:modelValue":o[4]||(o[4]=a=>e.text_duration=a),min:"1",max:"60"},null,8,kt),[[h,e.text_duration]])]),t("div",Tt,[t("label",Ct,i(l.$t("text_message")),1),m(t("textarea",{name:"",class:"form-control w-full mt-2",id:"",placeholder:l.$t("text_message"),"onUpdate:modelValue":o[5]||(o[5]=a=>e.text=a)},null,8,Ut),[[h,e.text]]),t("small",Ft,[U(i(l.$t("dynamic_variables"))+" ",1),_(V,{innerHTML:"{{name}}, {{phone}}"})])])])):e.type=="node-image"?(n(),d("div",St,[t("div",Pt,[t("label",Mt,i(l.$t("delay_in_reply"))+" ("+i(l.$t("in_sec"))+")",1),m(t("input",{type:"number",class:"form-control w-full mt-2",placeholder:l.$t("e_g_10"),"onUpdate:modelValue":o[6]||(o[6]=a=>e.image_duration=a),min:"1",max:"60"},null,8,Bt),[[h,e.image_duration]])]),t("div",jt,[t("label",Dt,i(l.$t("image")),1),t("div",Et,[t("input",{type:"file",accept:"image/*",class:"form-control w-full mt-2",onChange:o[7]||(o[7]=a=>N(a,"image"))},null,32)]),t("div",null,[t("img",{src:e.image,class:"image"},null,8,Nt)])])])):e.type=="box-with-audio"?(n(),d("div",Ht,[t("div",It,[t("label",Rt,i(l.$t("delay_in_reply"))+" ("+i(l.$t("in_sec"))+")",1),m(t("input",{type:"number",class:"form-control w-full mt-2",placeholder:"{{ $t('e_g_10') }}","onUpdate:modelValue":o[8]||(o[8]=a=>e.audio_duration=a),min:"1",max:"60"},null,512),[[h,e.audio_duration]])]),t("div",Qt,[t("label",Lt,i(l.$t("audio")),1),t("div",qt,[t("input",{type:"file",accept:"audio/*",class:"form-control w-full mt-2",onChange:o[9]||(o[9]=a=>N(a,"audio"))},null,32)]),e.audio?(n(),d("div",zt,[t("p",At,i(l.$t("preview")),1),_(x,null,{default:f(()=>[t("audio",Ot,[t("source",{src:e.audio,type:"audio/mp3"},null,8,Xt)])]),_:1})])):g("",!0)])])):e.type=="box-with-video"?(n(),d("div",Yt,[t("div",Wt,[t("label",Zt,i(l.$t("delay_in_reply"))+" ("+i(l.$t("in_sec"))+")",1),m(t("input",{type:"number",class:"form-control w-full mt-2",placeholder:l.$t("e_g_10"),"onUpdate:modelValue":o[10]||(o[10]=a=>e.video_duration=a),min:"1",max:"60"},null,8,Kt),[[h,e.video_duration]])]),t("div",Gt,[t("label",Jt,i(l.$t("video")),1),t("div",eo,[t("input",{type:"file",accept:"video/*",class:"form-control w-full mt-2",onChange:o[11]||(o[11]=a=>N(a,"video"))},null,32)]),e.video?(n(),d("div",to,[t("p",oo,i(l.$t("preview")),1),_(x,null,{default:f(()=>[t("video",lo,[t("source",{src:e.video,type:"video/mp4"},null,8,ao)])]),_:1})])):g("",!0)])])):e.type=="box-with-file"?(n(),d("div",io,[t("div",so,[t("label",no,i(l.$t("delay_in_reply"))+" ("+i(l.$t("in_sec"))+")",1),m(t("input",{type:"number",class:"form-control w-full mt-2",placeholder:l.$t("e_g_10"),"onUpdate:modelValue":o[12]||(o[12]=a=>e.file_duration=a),min:"1",max:"60"},null,8,ro),[[h,e.file_duration]])]),t("div",uo,[t("label",co,i(l.$t("file")),1),t("div",mo,[t("input",{type:"file",class:"form-control w-full mt-2",accept:".pdf",onChange:o[13]||(o[13]=a=>N(a,"file"))},null,32)]),e.file?(n(),d("div",_o,[t("p",po,i(l.$t("preview")),1),t("iframe",{id:"iframe",src:e.file},null,8,ho)])):g("",!0)])])):g("",!0),e.type=="box-with-list"?(n(),d("div",fo,[t("div",bo,[t("div",vo,[t("label",null,i(l.$t("delay_in_reply"))+" ("+i(l.$t("in_sec"))+")",1),m(t("input",{type:"number",class:"form-control",placeholder:l.$t("e_g_10"),"onUpdate:modelValue":o[14]||(o[14]=a=>e.interactive_duration=a),min:"1",max:"60"},null,8,go),[[h,e.interactive_duration]])]),t("div",yo,[t("label",null,i(l.$t("message_body")),1),m(t("textarea",{class:"form-control",placeholder:l.$t("message_body"),"onUpdate:modelValue":o[15]||(o[15]=a=>e.text_message=a)},null,8,wo),[[h,e.text_message]])]),t("div",xo,[t("label",null,i(l.$t("button_text")),1),m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[16]||(o[16]=a=>e.button_text=a),placeholder:l.$t("button_text")},null,8,$o),[[h,e.button_text]])]),t("div",Vo,i(l.$t("action")),1),t("div",ko,[t("div",To,[(n(!0),d(T,null,C(e.action.sections,(a,r)=>(n(),d("div",{key:r,class:"mb-4"},[t("div",Co,[t("label",null,i(l.$t("section_title")),1),m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":u=>a.title=u,placeholder:l.$t("section_title")},null,8,Uo),[[h,a.title]])]),(n(!0),d(T,null,C(a.rows,(u,v)=>(n(),d("div",{key:v},[t("div",Fo,[t("div",So,[t("label",null,i(l.$t("row_title")),1),m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":S=>u.title=S,placeholder:l.$t("row_title")},null,8,Po),[[h,u.title]])]),t("div",Mo,[t("label",null,i(l.$t("row_description")),1),m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":S=>u.description=S,placeholder:l.$t("row_description")},null,8,Bo),[[h,u.description]])]),t("button",{class:"btn btn-primary",style:{"margin-bottom":"10px"},onClick:S=>me(r,v)},"Remove Row",8,jo)])]))),128)),t("div",Do,[t("button",{class:"btn btn-primary",onClick:u=>ce(r)},"Add Row",8,Eo),t("button",{class:"btn btn-primary",onClick:u=>ue(r)},"Remove Section",8,No)])]))),128))]),t("button",{class:"btn btn-primary custom__btn",onClick:re},"Add Section")])])])):e.type=="box-with-button"?(n(),d("div",Ho,[t("div",Io,[t("label",null,i(l.$t("delay_in_reply"))+" ("+i(l.$t("in_sec"))+")",1),m(t("input",{type:"number",class:"form-control w-full mt-2",placeholder:l.$t("e_g_10"),"onUpdate:modelValue":o[17]||(o[17]=a=>e.button_duration=a),min:"1",max:"60"},null,8,Ro),[[h,e.button_duration]])]),t("div",Qo,[t("label",null,[U(i(l.$t("header_text"))+" ",1),l.$t("optional")?(n(),d("span",Lo,"("+i(l.$t("optional"))+")",1)):g("",!0)]),m(t("input",{class:P(["form-control w-full mt-2",{"is-invalid":e.isHeaderTextInvalid}]),"onUpdate:modelValue":o[18]||(o[18]=a=>e.header_text=a),onInput:o[19]||(o[19]=(...a)=>e.validateHeaderText&&e.validateHeaderText(...a)),placeholder:"Header Text",maxlength:e.limits.headerText},null,42,qo),[[h,e.header_text]]),t("small",zo,[U(i(l.$t("max_characters"))+": "+i(e.limits.headerText)+" ",1),t("span",{class:P({"text-danger":e.headerCharCount>e.limits.headerText})}," ("+i(e.headerCharCount)+" / "+i(e.limits.headerText)+") ",3)])]),t("div",Ao,[t("label",null,i(l.$t("button_message")),1),m(t("textarea",{name:"message",class:P(["form-control",{"is-invalid":e.isButtonMessageInvalid}]),id:"message","onUpdate:modelValue":o[20]||(o[20]=a=>e.button_message=a),placeholder:l.$t("button_message"),onInput:o[21]||(o[21]=(...a)=>e.validateButtonMessage&&e.validateButtonMessage(...a)),maxlength:e.limits.buttonMessage},null,42,Oo),[[h,e.button_message]]),t("small",Xo,[U(i(l.$t("max_characters"))+": "+i(e.limits.buttonMessage)+" ",1),t("span",{class:P({"text-danger":e.buttonMessageCharCount>e.limits.buttonMessage})}," ("+i(e.buttonMessageCharCount)+" / "+i(e.limits.buttonMessage)+") ",3)])]),t("div",Yo,[t("div",Wo,[t("legend",null,i(l.$t("buttons")),1),t("div",Zo,[(n(!0),d(T,null,C(e.items,(a,r)=>(n(),d("div",{key:r,class:"mb-3"},[t("label",null,i(k(s).lang["button"+(r+1)+"_text"]),1),m(t("input",{type:"text",class:P(["form-control w-full mt-2",{"is-invalid":e.isButtonTextInvalid(r)}]),placeholder:l.$t("button_text"),onInput:u=>e.handleInput(u,r),"onUpdate:modelValue":u=>a.text=u,maxlength:e.limits.buttonText},null,42,Ko),[[h,a.text]]),t("small",Go,[U(i(l.$t("max_characters"))+": "+i(e.limits.buttonText)+" ",1),t("span",{class:P({"text-danger":e.items[r].text.length>e.limits.buttonText})}," ("+i(e.items[r].text.length)+" / "+i(e.limits.buttonText)+") ",3)])]))),128))])])]),t("div",Jo,[t("label",null,[U(i(l.$t("footer_text"))+" ",1),l.$t("optional")?(n(),d("span",el,"("+i(l.$t("optional"))+")",1)):g("",!0)]),m(t("input",{type:"text",class:P(["form-control w-full mt-2",{"is-invalid":e.isFooterTextInvalid}]),placeholder:l.$t("footer_text"),"onUpdate:modelValue":o[22]||(o[22]=a=>e.footer_text=a),onInput:o[23]||(o[23]=(...a)=>e.validateFooterText&&e.validateFooterText(...a)),maxlength:e.limits.footerText},null,42,tl),[[h,e.footer_text]]),t("small",ol,[U(i(l.$t("max_characters"))+": "+i(e.limits.footerText)+" ",1),t("span",{class:P({"text-danger":e.footerCharCount>e.limits.footerText})}," ("+i(e.footerCharCount)+" / "+i(e.limits.footerText)+") ",3)])])])):e.type=="box-with-location"?(n(),d("div",ll,[t("div",al,[t("label",il,i(l.$t("delay_in_reply"))+" ("+i(l.$t("in_sec"))+")",1),m(t("input",{type:"number",class:"form-control w-full mt-2",placeholder:l.$t("e_g_10"),"onUpdate:modelValue":o[24]||(o[24]=a=>e.location_duration=a),min:"1",max:"60"},null,8,sl),[[h,e.location_duration]])]),t("div",nl,[t("label",dl,i(l.$t("address_name")),1),m(t("input",{type:"text","onUpdate:modelValue":o[25]||(o[25]=a=>e.address_name=a),class:"form-control w-full mt-2",placeholder:l.$t("address_name")},null,8,rl),[[h,e.address_name]])]),t("div",ul,[t("label",cl,i(l.$t("address")),1),m(t("textarea",{class:"form-control w-full mt-2","onUpdate:modelValue":o[26]||(o[26]=a=>e.address=a),name:"",id:"",rows:"3",placeholder:l.$t("address")},null,8,ml),[[h,e.address]])]),t("div",_l,[t("label",pl,i(l.$t("latitude")),1),m(t("input",{type:"text","onUpdate:modelValue":o[27]||(o[27]=a=>e.latitude=a),class:"form-control w-full mt-2",placeholder:l.$t("latitude")},null,8,hl),[[h,e.latitude]])]),t("div",fl,[t("label",bl,i(l.$t("longitude")),1),m(t("input",{type:"text","onUpdate:modelValue":o[28]||(o[28]=a=>e.longitude=a),class:"form-control w-full mt-2",placeholder:l.$t("longitude")},null,8,vl),[[h,e.longitude]])])])):e.type=="box-with-condition"?(n(),d("div",gl,[t("label",null,i(l.$t("match_type")),1),_(k(z),{modelValue:e.match_type,"onUpdate:modelValue":o[29]||(o[29]=a=>e.match_type=a),label:"label","track-by":"value",options:[{value:"all_match",label:"All Match"},{value:"any_match",label:"Any Match"}]},null,8,["modelValue"]),t("div",null,[t("p",yl,i(l.$t("fields")),1),(n(!0),d(T,null,C(e.condition_fields,(a,r)=>(n(),d("div",{class:"flex_input",key:r},[t("div",wl,[t("label",xl,i(l.$t("variable")),1),_(k(z),{modelValue:a.variable,"onUpdate:modelValue":u=>a.variable=u,label:"label","track-by":"value",options:e.condition_variable_options},null,8,["modelValue","onUpdate:modelValue","options"])]),t("div",$l,[t("label",Vl,i(l.$t("operator")),1),_(k(z),{modelValue:a.operator,"onUpdate:modelValue":u=>a.operator=u,label:"label","track-by":"value",options:e.condition_operator_options},null,8,["modelValue","onUpdate:modelValue","options"])]),t("div",kl,[t("label",Tl,i(l.$t("value")),1),m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":u=>a.value=u},null,8,Cl),[[h,a.value]])]),t("div",Ul,[t("label",Fl,i(l.$t("action")),1),t("div",Sl,[r>0?(n(),d("a",{key:0,href:"javascript:void(0)",onClick:he},[...o[37]||(o[37]=[t("i",{class:"las la-minus"},null,-1)])])):(n(),d("a",{key:1,href:"javascript:void(0)",onClick:pe},[...o[38]||(o[38]=[t("i",{class:"las la-plus"},null,-1)])]))])])]))),128))])])):e.type=="box-with-template"?(n(),d("div",Pl,[t("label",null,i(l.$t("template")),1),m(t("select",{class:"form-control","onUpdate:modelValue":o[30]||(o[30]=a=>e.template_id=a),onChange:Y},[o[39]||(o[39]=t("option",{value:""},"Select Template",-1)),(n(!0),d(T,null,C(k(y).templates,(a,r)=>(n(),d("option",{key:r,value:a.id},i(a.category)+" => "+i(a.name),9,Ml))),128))],544),[[q,e.template_id]]),e.selectedTemplate&&e.selectedTemplate.variables?(n(),d("div",Bl,[(n(!0),d(T,null,C(e.selectedTemplate.variables,(a,r)=>(n(),d("div",{key:r},[a[0]?(n(),d("h6",jl,i(r),1)):g("",!0),(n(!0),d(T,null,C(a,(u,v)=>(n(),d("div",{key:v,class:"row"},[t("div",Dl,[t("label",El,i(l.$t("match_value")),1),m(t("select",{name:`${r}_matchs[${u.id}]`,"onUpdate:modelValue":S=>e.templateVariables[r].matches[u.id]=S,class:"form-control form-select body-match-select"},[t("option",Hl,i(l.$t("use_input_value")),1),t("option",Il,i(l.$t("contact_name")),1),t("option",Rl,i(l.$t("contact_phone")),1)],8,Nl),[[q,e.templateVariables[r].matches[u.id]]])]),t("div",Ql,[t("label",{class:"form-label",for:`${r}_${u.id}`},i(l.$t("variable"))+" "+i(u.id),9,Ll),m(t("input",{type:"text",class:"form-control live_preview","data-target":`.${r}_${u.id}`,id:`${r}_${u.id}`,name:`${r}_values[${u.id}]`,placeholder:u.exampleValue,value:u.exampleValue,"onUpdate:modelValue":S=>e.templateVariables[r].values[u.id]=S},null,8,ql),[[h,e.templateVariables[r].values[u.id]]])])]))),128)),r==="document"?(n(),d("div",zl,[t("div",Al,[t("label",Ol,i(l.$t("document")),1),o[40]||(o[40]=t("input",{type:"file",id:"document",class:"form-control boot-file-input",name:"document",accept:"application/pdf",required:""},null,-1))])])):g("",!0),r==="image"?(n(),d("div",Xl,[t("div",Yl,[t("label",Wl,i(l.$t("header_image")),1),o[41]||(o[41]=t("input",{type:"file",id:"header_image",class:"form-control boot-file-input header_file",name:"image",accept:"image/*",required:""},null,-1))])])):g("",!0),r==="video"?(n(),d("div",Zl,[t("div",Kl,[t("label",Gl,i(l.$t("video")),1),o[42]||(o[42]=t("input",{type:"file",id:"video",class:"form-control boot-file-input",name:"video",accept:"video/mp4,video/x-m4v,video/*",required:""},null,-1))])])):g("",!0),r==="buttons"?(n(),d("div",Jl,[(n(!0),d(T,null,C(a,u=>(n(),d("div",{key:u.id},[(n(!0),d(T,null,C(u,v=>(n(),d("div",{key:v.id},[v.type==="URL"?(n(),d("div",ea,[t("div",ta,[t("label",oa,i(l.$t("match_value")),1),t("select",{name:`button_matchs[${v.id}]`,class:"form-control form-select body-match-select"},[t("option",aa,i(l.$t("use_input_value")),1),t("option",ia,i(l.$t("contact_name")),1),t("option",sa,i(l.$t("contact_phone")),1)],8,la)]),t("div",na,[t("label",{class:"form-label",for:`button_${v.id}`},i(l.$t("variable")),9,da),t("input",{type:"text",class:"form-control live_preview","data-target":`.button_${v.id}`,id:`button_${v.id}`,name:`button_values[${v.id}]`,placeholder:v.exampleValue,value:v.exampleValue},null,8,ra)])])):g("",!0)]))),128))]))),128))])):g("",!0)]))),128))])):g("",!0)])):e.type=="box-with-flow"?(n(),d("div",ua,[t("label",null,i(l.$t("flow")),1),m(t("select",{class:"form-control","onUpdate:modelValue":o[31]||(o[31]=a=>e.flow_id=a)},[o[43]||(o[43]=t("option",{value:""},"Select flow",-1)),(n(!0),d(T,null,C(fe.value,(a,r)=>(n(),d("option",{key:r,value:a.id},i(a.name),9,ca))),128))],512),[[q,e.flow_id]])])):g("",!0)])])]),_:1},8,["isOpen"])]),_:1})}}};export{pi as default};
