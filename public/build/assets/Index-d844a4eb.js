import V from"./App-b210138e.js";import{o as d,c as p,f as e,g as t,k as i,t as o,F as y,e as O,i as $,n as k,a as l,u as v,j,m as C,r as D,l as F,O as N}from"./app-586cbc19.js";import{_ as R}from"./AlertModal-511f2bfb.js";import{u as E}from"./useAlertModal-e2360484.js";import{l as L}from"./index-a65940f1.js";/* empty css              */import{_ as M}from"./Table-3be4b86e.js";import{T as S,a as Z,_ as f}from"./TableHeaderRowItem-aa192b53.js";import{T as z,a as H,_ as h}from"./TableBodyRowItem-405cc657.js";import{_ as P}from"./Dropdown-5b156d2f.js";import{_ as I,a as x}from"./DropdownItem-659d2267.js";import"./Sidebar-c20edeb2.js";import"./Menu-dd50bd69.js";import"./Modal-a35cf5fb.js";import"./transition-c0d64afd.js";import"./hidden-bc07d1fe.js";import"./ProfileModal-e2807503.js";import"./FormInput-bee1ab8e.js";import"./FormPhoneInput-c57cb35b.js";import"./FormSelect-4a83dbbc.js";import"./use-text-value-a2f8b922.js";import"./LangToggle-e8dc491d.js";import"./MobileSidebar-68e85834.js";import"./Pagination-834739c7.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-tree-walker-a3121160.js";const J={class:"py-1 px-2 bg-gray-50 rounded-[5px] border border-dashed w-[20em] truncate text-xs"},U={key:0,class:"py-1 rounded-[5px] text-xs px-3 bg-[#ebfdf4] text-[#38733f]"},q={key:1,class:"py-1 rounded-[5px] text-xs px-3 bg-[#fae6e6] text-[darkred]"},Y={key:2,class:"py-1 rounded-[5px] text-xs px-3 bg-[#ddebf7] text-slate-700"},G={__name:"TemplateTable",props:{rows:{type:Object,required:!0}},emits:["delete"],setup(_,{emit:g}){const n=_,{isOpenAlert:b,openAlert:u,confirmAlert:m}=E(),A=async s=>{try{const r=await C.delete(`/templates/${s}`);if(r.status===200&&r.data.success){const a=n.rows.data.findIndex(c=>c.uuid===s);n.rows.data.splice(a,1)}L(r.data.message,{autoClose:3e3})}catch{}},T=s=>s===n.rows.data.length-1,w=s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase(),B=s=>{const a=JSON.parse(s).components.find(c=>c.type==="BODY");return a?a.text:"N/A"};return(s,r)=>(d(),p(y,null,[e(M,{rows:_.rows},{default:t(()=>[e(S,null,{default:t(()=>[e(Z,null,{default:t(()=>[e(f,{position:"first"},{default:t(()=>[i(o(s.$t("Name")),1)]),_:1}),e(f,null,{default:t(()=>[i(o(s.$t("Category")),1)]),_:1}),e(f,null,{default:t(()=>[i(o(s.$t("Preview")),1)]),_:1}),e(f,null,{default:t(()=>[i(o(s.$t("Status")),1)]),_:1}),e(f,null,{default:t(()=>[i(o(s.$t("Last updated")),1)]),_:1}),e(f,{position:"last"})]),_:1})]),_:1}),e(z,null,{default:t(()=>[(d(!0),p(y,null,O(_.rows.data,(a,c)=>(d(),$(H,{key:c,class:k(T(c)?"":"border-b")},{default:t(()=>[e(h,{position:"first"},{default:t(()=>[i(o(a.name),1)]),_:2},1024),e(h,{class:"hidden sm:table-cell"},{default:t(()=>[i(o(w(a.category)),1)]),_:2},1024),e(h,{class:"hidden sm:table-cell"},{default:t(()=>[l("div",J,o(B(a.metadata)),1)]),_:2},1024),e(h,null,{default:t(()=>[a.status=="APPROVED"?(d(),p("span",U,o(s.$t(w(a.status))),1)):a.status=="REJECTED"?(d(),p("span",q,o(s.$t(w(a.status))),1)):(d(),p("span",Y,o(s.$t(w(a.status))),1))]),_:2},1024),e(h,{class:"hidden sm:table-cell"},{default:t(()=>[i(o(a.updated_at),1)]),_:2},1024),e(h,{position:"last"},{default:t(()=>[e(P,{align:"right",class:"mt-2"},{items:t(()=>[e(I,null,{default:t(()=>[e(x,{href:"/templates/"+a.uuid},{default:t(()=>[i(o(s.$t("edit")),1)]),_:1},8,["href"]),e(x,{as:"button",onClick:le=>v(u)(a.uuid)},{default:t(()=>[i(o(s.$t("Delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),default:t(()=>[r[2]||(r[2]=l("button",{class:"inline-flex w-full justify-center rounded-md text-sm font-medium text-black hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},[l("span",{class:"hover:bg-[#F6F7F9] hover:rounded-full w-[fit-content] p-2"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M12 16a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2Z"})])])],-1))]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1},8,["rows"]),e(R,{modelValue:v(b),"onUpdate:modelValue":r[0]||(r[0]=a=>j(b)?b.value=a:null),onConfirm:r[1]||(r[1]=()=>v(m)(A)),label:s.$t("Delete row"),description:s.$t("Are you sure you want to delete this row? This action can not be undone")},null,8,["modelValue","label","description"])],64))}},K={class:"bg-white md:bg-inherit pt-0 px-4 md:pt-8 md:p-8 rounded-[5px] text-[#000] overflow-y-scroll capitalize"},Q={class:"flex justify-between mt-8 md:mt-0"},W={class:"text-xl mb-1"},X={class:"mb-6 flex items-center text-sm leading-6 text-gray-600"},ee={class:"ml-1 mt-1"},te={class:"space-x-2 flex items-center"},se=["disabled"],ae={key:0},oe={key:1,class:"text-slate-600 animate-spin",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},De={__name:"Index",props:{rows:Object},setup(_){const g=_,n=D(!1),b=()=>{n.value=!0,C.get("/templates/sync").then(function(u){N.reload(),setTimeout(()=>{n.value=!1},1500)}).catch(function(u){n.value=!1})};return(u,m)=>(d(),$(V,null,{default:t(()=>[l("div",K,[l("div",Q,[l("div",null,[l("h2",W,o(u.$t("Message templates")),1),l("p",X,[m[0]||(m[0]=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),l("span",ee,o(u.$t("Add template")),1)])]),l("div",te,[l("button",{onClick:b,class:k(["rounded-md px-3 py-2 text-sm text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 capitalize",n.value?"bg-gray-200":"bg-primary hover:bg-primary shadow-sm"]),disabled:n.value},[n.value?(d(),p("svg",oe,[...m[1]||(m[1]=[l("path",{fill:"currentColor",d:"M18.43 4.25a.76.76 0 0 0-.75.75v2.43l-.84-.84a7.24 7.24 0 0 0-12 2.78a.74.74 0 0 0 .46 1a.73.73 0 0 0 .25 0a.76.76 0 0 0 .71-.51a5.63 5.63 0 0 1 1.37-2.2a5.76 5.76 0 0 1 8.13 0l.84.84h-2.41a.75.75 0 0 0 0 1.5h4.24a.74.74 0 0 0 .75-.75V5a.75.75 0 0 0-.75-.75Zm.25 9.43a.76.76 0 0 0-1 .47a5.63 5.63 0 0 1-1.37 2.2a5.76 5.76 0 0 1-8.13 0l-.84-.84h2.47a.75.75 0 0 0 0-1.5H5.57a.74.74 0 0 0-.75.75V19a.75.75 0 0 0 1.5 0v-2.43l.84.84a7.24 7.24 0 0 0 12-2.78a.74.74 0 0 0-.48-.95Z"},null,-1)])])):(d(),p("span",ae,o(u.$t("Sync templates")),1))],10,se),e(v(F),{href:"/templates/create",class:"md:block hidden rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm hover:bg-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},{default:t(()=>[i(o(u.$t("Create template")),1)]),_:1})])]),e(G,{rows:g.rows},null,8,["rows"])])]),_:1}))}};export{De as default};
