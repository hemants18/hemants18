import{r as v,T as Y,y as G,O as W,c as a,a as s,d as q,t as e,f as b,g as p,u,b as l,F as z,o,k as c,l as g,i as y,n as x,e as J,h as O}from"./app-586cbc19.js";import K from"./App-b210138e.js";import{_ as Q}from"./BillingTable-58b25ac0.js";import{_ as X}from"./Modal-a35cf5fb.js";import{_ as ss}from"./FormInput-bee1ab8e.js";import{P as es,E as ts}from"./pusher-3b2c2592.js";import"./Sidebar-c20edeb2.js";import"./Menu-dd50bd69.js";import"./ProfileModal-e2807503.js";import"./FormPhoneInput-c57cb35b.js";import"./FormSelect-4a83dbbc.js";import"./hidden-bc07d1fe.js";import"./use-text-value-a2f8b922.js";import"./transition-c0d64afd.js";import"./LangToggle-e8dc491d.js";import"./index-a65940f1.js";import"./MobileSidebar-68e85834.js";/* empty css              */import"./debounce-f0e5e0a5.js";import"./_baseGetTag-49d45606.js";import"./Table-3be4b86e.js";import"./Pagination-834739c7.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./TableHeaderRowItem-aa192b53.js";import"./TableBodyRowItem-405cc657.js";const is={key:0,class:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50"},ns={class:"bg-white p-6 rounded-lg shadow-lg text-center text-sm"},os={class:"bg-white md:bg-inherit pt-0 px-4 md:pt-8 md:p-8 rounded-[5px] text-[#000] overflow-y-scroll"},as={class:"flex justify-between mt-8 md:mt-0"},ls={class:"text-xl mb-1"},rs={class:"mb-6 flex items-center text-sm leading-6 text-gray-600"},us={class:"ml-1 mt-1"},ds={key:0,class:"bg-red-500 p-5 w-100 mb-4 rounded-[0.5rem] flex justify-between items-center space-x-4 text-white"},cs={class:"flex items-center space-x-4"},ps={key:0,class:"text-sm"},ms={key:1,class:"text-sm"},bs={class:"float-right"},gs={class:"md:flex bg-slate-100 md:bg-white shadow-sm p-5 rounded-[0.5rem] space-y-6"},fs={class:"md:w-[50%]"},hs={class:"mb-5"},vs={class:"text-sm text-gray-500 tracking-[0px]"},ys={key:0,class:"text-[18px]"},xs={key:1,class:"text-[18px]"},ws={key:0,class:"flex gap-x-3"},_s={class:"text-sm text-gray-500 tracking-[0px]"},ks={class:"text-sm"},$s={class:"text-sm text-gray-500 tracking-[0px]"},Ms={class:"text-sm"},Ss={class:"text-sm text-gray-500 tracking-[0px]"},Ps={class:"text-sm"},Cs={key:1,class:"flex space-x-6"},As={class:"text-sm text-gray-500 tracking-[0px]"},Ts={class:"text-sm"},Ns={class:"md:w-[50%]"},Zs={class:"md:float-right grid grid-cols-2 gap-y-2 gap-x-3"},Bs={class:"bg-slate-100 md:bg-gray-50 p-5 md:px-0 rounded-[0.5rem] mt-10 w-full"},Vs={class:"w-full"},Rs={class:"mb-5"},js={class:"text-xl tracking-[0px]"},Es={class:"mb-6 flex items-center text-sm leading-6 text-gray-600"},Is={class:"ml-1 mt-1"},Ls={class:"w-100"},zs={class:"text-2xl mb-4"},Os={class:"text-sm"},Ds={class:"text-sm mt-4 mb-2"},Fs={class:"grid grid-cols-2 gap-2"},Hs={class:"flex items-center"},Us=["onClick"],Ys={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Gs=["onClick"],Ws={class:"form-error text-[#b91c1c] text-xs mt-2"},qs={class:"mt-6 flex"},Js=["disabled"],Ks={key:0,class:"flex space-x-1"},Qs={key:1,class:"flex space-x-1"},$e={__name:"Index",props:["subscription","rows","filters","subscriptionIsActive","subscriptionDetails","methods","isPaymentLoading","pusherSettings","organizationId"],setup(f){const i=f;v(i.subscription.data);const h=v(!1),m=v(!1),d=Y({amount:null,method:null}),w=t=>{d.method=t};function _(){h.value=!0}function D(){h.value=!1}const F=async()=>{m.value=!0,d.post("/pay",{preserveScroll:!0,onFinish:()=>{m.value=!1}})};return G(()=>{i.pusherSettings.pusher_app_key!=null&&i.pusherSettings.pusher_app_cluster!=null&&(window.Pusher=es,window.Echo=new ts({broadcaster:"pusher",key:i.pusherSettings.pusher_app_key,cluster:i.pusherSettings.pusher_app_cluster,encrypted:!0}),window.Echo.channel("payments.ch"+i.organizationId).listen("NewPaymentEvent",t=>{W.visit("/billing",{})}))}),(t,n)=>(o(),a(z,null,[f.isPaymentLoading?(o(),a("div",is,[s("div",ns,[n[4]||(n[4]=q('<div class="flex justify-center mb-4"><svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24"><path fill="black" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z" transform="matrix(0 0 0 0 12 12)"><animateTransform id="svgSpinnersPulseRingsMultiple0" attributeName="transform" begin="0;svgSpinnersPulseRingsMultiple2.end" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="translate" values="12 12;0 0"></animateTransform><animateTransform additive="sum" attributeName="transform" begin="0;svgSpinnersPulseRingsMultiple2.end" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="scale" values="0;1"></animateTransform><animate attributeName="opacity" begin="0;svgSpinnersPulseRingsMultiple2.end" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" values="1;0"></animate></path><path fill="black" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z" transform="matrix(0 0 0 0 12 12)"><animateTransform id="svgSpinnersPulseRingsMultiple1" attributeName="transform" begin="svgSpinnersPulseRingsMultiple0.begin+0.2s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="translate" values="12 12;0 0"></animateTransform><animateTransform additive="sum" attributeName="transform" begin="svgSpinnersPulseRingsMultiple0.begin+0.2s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="scale" values="0;1"></animateTransform><animate attributeName="opacity" begin="svgSpinnersPulseRingsMultiple0.begin+0.2s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" values="1;0"></animate></path><path fill="black" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z" transform="matrix(0 0 0 0 12 12)"><animateTransform id="svgSpinnersPulseRingsMultiple2" attributeName="transform" begin="svgSpinnersPulseRingsMultiple0.begin+0.4s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="translate" values="12 12;0 0"></animateTransform><animateTransform additive="sum" attributeName="transform" begin="svgSpinnersPulseRingsMultiple0.begin+0.4s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="scale" values="0;1"></animateTransform><animate attributeName="opacity" begin="svgSpinnersPulseRingsMultiple0.begin+0.4s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" values="1;0"></animate></path></svg></div>',1)),s("p",null,e(t.$t("Please wait as the payment is being processed!")),1),b(u(g),{href:"billing",class:"underline"},{default:p(()=>[c(e(t.$t("Go to billing")),1)]),_:1})])])):l("",!0),b(K,null,{default:p(()=>{var k,$,M,S,P,C,A,T,N,Z,B,V,R,j,E,I,L;return[s("div",os,[s("div",as,[s("div",null,[s("h2",ls,e(t.$t("Billing and subscription")),1),s("p",rs,[n[5]||(n[5]=s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[s("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),s("span",us,e(t.$t("View and manage your billing history")),1)])])]),f.subscriptionIsActive?l("",!0):(o(),a("div",ds,[s("div",cs,[n[8]||(n[8]=s("span",null,[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 56 56"},[s("path",{fill:"currentColor",d:"M9.965 50.207h36.07c3.985 0 6.469-2.86 6.469-6.469c0-1.078-.281-2.18-.867-3.187L33.567 9.074c-1.22-2.133-3.352-3.281-5.555-3.281c-2.18 0-4.336 1.148-5.579 3.281l-18.07 31.5a6.253 6.253 0 0 0-.867 3.164c0 3.61 2.508 6.469 6.469 6.469m.047-3.68c-1.641 0-2.72-1.336-2.72-2.789c0-.422.071-.914.306-1.406l18.046-31.477c.516-.89 1.454-1.312 2.368-1.312c.914 0 1.804.398 2.32 1.312l18.047 31.5c.234.47.351.961.351 1.383c0 1.453-1.125 2.79-2.742 2.79Zm18-12.117c1.125 0 1.78-.656 1.804-1.875l.328-12.351c.024-1.196-.914-2.086-2.156-2.086c-1.265 0-2.156.867-2.133 2.062l.305 12.375c.023 1.196.68 1.875 1.852 1.875m0 7.617c1.359 0 2.53-1.078 2.53-2.437c0-1.383-1.148-2.438-2.53-2.438c-1.383 0-2.532 1.078-2.532 2.438c0 1.336 1.172 2.437 2.532 2.437"})])],-1)),((k=i.subscription)==null?void 0:k.status)==="trial"?(o(),a("h2",ps,[c(e(t.$t("Your trial period is over"))+" ",1),n[6]||(n[6]=s("br",null,null,-1)),c(" "+e(t.$t("Please subscribe to a plan to continue using the app"))+".",1)])):l("",!0),(($=i.subscription)==null?void 0:$.status)==="active"?(o(),a("h2",ms,[c(e(t.$t("We were unable to autorenew your subscription"))+" ",1),n[7]||(n[7]=s("br",null,null,-1)),c(" "+e(t.$t("To continue using the app, please make a payment of"))+" "+e((M=i.subscriptionDetails)==null?void 0:M.accountBalance)+".",1)])):l("",!0)]),s("div",null,[s("div",bs,[((S=i.subscription)==null?void 0:S.status)==="trial"?(o(),y(u(g),{key:0,href:"/subscription",type:"button",class:"rounded-md bg-white text-gray-600 px-3 py-2 text-sm shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},{default:p(()=>[c(e(t.$t("Subscribe")),1)]),_:1})):l("",!0),((P=i.subscription)==null?void 0:P.status)==="active"?(o(),a("button",{key:1,onClick:n[0]||(n[0]=r=>_()),type:"button",class:"rounded-md bg-white text-gray-600 px-3 py-2 text-sm shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},e(t.$t("Add payment")),1)):l("",!0)])])])),s("div",gs,[s("div",fs,[s("div",hs,[s("h2",vs,e(t.$t("Plan details")),1),((C=i.subscription)==null?void 0:C.status)==="trial"?(o(),a("h2",ys,e(t.$t("Trial period")),1)):l("",!0),((A=i.subscription)==null?void 0:A.status)==="active"?(o(),a("h2",xs,e((N=(T=i.subscription)==null?void 0:T.plan)==null?void 0:N.name),1)):l("",!0)]),((Z=i.subscription)==null?void 0:Z.status)!="trial"?(o(),a("div",ws,[s("div",null,[s("h2",_s,e(t.$t("Start date")),1),s("span",ks,e((B=i.subscription)==null?void 0:B.start_date),1)]),s("div",null,[s("h2",$s,e(t.$t("Next billing date")),1),s("span",Ms,e((V=i.subscription)==null?void 0:V.valid_until),1)]),s("div",null,[s("h2",Ss,e(t.$t("Account balance")),1),s("span",Ps,e((R=i.subscriptionDetails)==null?void 0:R.accountBalance),1)])])):l("",!0),((j=i.subscription)==null?void 0:j.status)==="trial"?(o(),a("div",Cs,[s("div",null,[s("h2",As,e(t.$t("Trial expires on")),1),s("span",Ts,e((E=i.subscription)==null?void 0:E.valid_until),1)])])):l("",!0)]),s("div",Ns,[s("div",Zs,[s("button",{onClick:n[1]||(n[1]=r=>_()),type:"button",class:"w-full capitalize rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 mr-2 col-span-2 md:col-span-1 text-center"},e(t.$t("Add payment")),1),((I=i.subscription)==null?void 0:I.status)==="trial"?(o(),y(u(g),{key:0,href:"/subscription",class:"w-full rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 col-span-2 md:col-span-1 text-center"},{default:p(()=>[c(e(t.$t("Subscribe to plan")),1)]),_:1})):l("",!0),((L=i.subscription)==null?void 0:L.status)==="active"?(o(),y(u(g),{key:1,href:"/subscription",class:"w-full rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 col-span-2 md:col-span-1 text-center"},{default:p(()=>[c(e(t.$t("Upgrade subscription")),1)]),_:1})):l("",!0)])])]),s("div",Bs,[s("div",Vs,[s("div",Rs,[s("h2",js,e(t.$t("Invoices")),1),s("p",Es,[s("span",Is,e(t.$t("You can view your invoices and past billing details here")),1)])]),s("div",Ls,[b(Q,{rows:i.rows,filters:i.filters},null,8,["rows","filters"])])])])]),b(X,{label:t.label,isOpen:h.value},{default:p(()=>[s("form",{onSubmit:n[3]||(n[3]=O(r=>F(),["prevent"])),class:"gap-y-4"},[s("h2",zs,e(t.$t("Add payment")),1),s("p",Os,e(t.$t("Add your own custom amount")),1),b(ss,{modelValue:u(d).amount,"onUpdate:modelValue":n[2]||(n[2]=r=>u(d).amount=r),error:u(d).errors.amount,name:"",type:"number",class:x("w-100")},null,8,["modelValue","error"]),s("h2",Ds,e(t.$t("Pay via")),1),s("div",Fs,[(o(!0),a(z,null,J(i.methods,(r,H)=>(o(),a("div",{key:H,class:""},[s("div",Hs,[s("label",{onClick:U=>w(r.name),for:"myCheckbox",class:"cursor-pointer"},[s("div",{class:x(["w-5 h-5 border border-gray-400 rounded-md flex items-center justify-center",u(d).method===r.name?"bg-[#000]":""])},[u(d).method===r.name?(o(),a("svg",Ys,[...n[9]||(n[9]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):l("",!0)],2)],8,Us),s("span",{onClick:U=>w(r.name),class:"ml-2 text-sm cursor-pointer"},e(r.name),9,Gs)])]))),128))]),s("div",Ws,e(u(d).errors.method),1),s("div",qs,[s("button",{type:"button",onClick:O(D,["self"]),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},e(t.$t("Cancel")),1),s("button",{class:x(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":m.value}]),disabled:m.value},[m.value?(o(),a("span",Ks,[n[10]||(n[10]=s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"}),s("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[s("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})])],-1)),s("span",null,e(t.$t("Processing")),1)])):(o(),a("span",Qs,[n[11]||(n[11]=s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M12 13a1.49 1.49 0 0 0-1 2.61V17a1 1 0 0 0 2 0v-1.39A1.49 1.49 0 0 0 12 13m5-4V7A5 5 0 0 0 7 7v2a3 3 0 0 0-3 3v7a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-7a3 3 0 0 0-3-3M9 7a3 3 0 0 1 6 0v2H9Zm9 12a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1Z"})],-1)),s("span",null,e(t.$t("Continue")),1)]))],10,Js)])],32)]),_:1},8,["label","isOpen"])]}),_:1})],64))}};export{$e as default};
