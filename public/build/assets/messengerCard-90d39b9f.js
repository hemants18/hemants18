import{r as D,q as u,x as L,i as g,g as P,u as e,o as l,a,t as f,b as c,w as T,v as V,n as U,f as C,c as m,e as S,F as w}from"./app-71688fef.js";import{_ as v,P as h}from"./vue-flow-core-436bf019.js";import{u as j}from"./main-6cecb8e9.js";import{g as M}from"./radomId-aebfd87c.js";import{T as B}from"./TrashIcon-bc49cd17.js";import{D as q}from"./vue3-smooth-dnd.esm-5bbd00d4.js";/* empty css                                                                      */import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";const J=["id"],K=["src"],O=["id"],Q=["id"],W={class:"button",style:{position:"relative"}},X=["onClick"],Y={class:"button",style:{position:"relative"}},Z=["id","onInput"],tt=["onClick"],et={__name:"messengerCard",props:{mid:String,id:String,editor:Boolean},setup(r){const y=D(!0),n=r,b=j();let d=u(()=>b.getMessageById(n.mid)),A=u(()=>d.value.items),o=u(()=>b.getItemById(n.mid,n.id)),p=u(()=>{var i;return(i=o.value)==null?void 0:i.buttons}),x=u(()=>o.value.default_action);const $=u(()=>b.getDefaultValues().image),_=(i,t)=>{switch(i.target.id){case n.id+"title":o.value.title=i.target.innerText||"Title";break;case n.id+"number":o.value.number=i.target.innerText||"Card Comment";break;case t+"button":d.value.items.find(s=>s.id==n.id).buttons.find(s=>s.id==t).text=i.target.innerText||"Enter Text";break}},E=i=>{d.value.items=A.value.filter(t=>t.id!=i)},N=i=>{d.value.items.find(t=>t.id==n.id).buttons=p.value.filter(t=>t.id!=i)},R=()=>{d.value.items.find(i=>i.id==n.id).buttons.push({id:M(),text:`New Button ${p.value.length+1}`})},z=()=>{d.value.items.find(i=>i.id==n.id).default_action.push({id:M(),text:"Default Action"})},F=i=>{d.value.items.find(t=>t.id==n.id).default_action=x.value.filter(t=>t.id!=i)},k=D(null),H=i=>{i.target.style.height="auto",i.target.style.height=i.target.scrollHeight+4+"px"};return L(()=>{k.value.style.height=k.value.scrollHeight+4+"px"}),(i,t)=>(l(),g(e(q),null,{default:P(()=>[a("div",{class:"number",contenteditable:"true",id:r.id+"number",onInput:_},f(e(o).number),41,J),a("div",{class:"messenger-container",onMouseenter:t[4]||(t[4]=s=>y.value=!1),onMouseleave:t[5]||(t[5]=s=>y.value=!0),"data-toggle":"tooltip","data-placement":"left",title:"Messenger Carousel"},[n.editor===!1?(l(),g(e(v),{key:0,id:r.id+"comment",class:"handle",type:"target",position:e(h).Left,style:{top:"10%",left:"-3.5% !important"}},null,8,["id","position"])):c("",!0),n.editor===!1?(l(),g(e(v),{key:1,id:r.id+"right",class:"handle",type:"source",position:e(h).Right,style:{top:"10%",left:"98% !important"}},null,8,["id","position"])):c("",!0),a("img",{src:e(o).image_url||$.value,style:{width:"100%",height:"9rem","object-fit":"contain"}},null,8,K),T(a("input",{type:"text",id:r.id+"image_url",class:"image_source_input","onUpdate:modelValue":t[0]||(t[0]=s=>e(o).image_url=s),placeholder:"Enter Image Source here"},null,8,O),[[V,e(o).image_url]]),a("div",{class:"content",id:r.id+"title",contenteditable:"",onInput:_},f(e(o).title),41,Q),T(a("textarea",{ref_key:"textarea",ref:k,"onUpdate:modelValue":t[1]||(t[1]=s=>e(o).subtitle=s),onInput:H,placeholder:"Subtitle"},"      ",544),[[V,e(o).subtitle]]),a("div",{class:U(["button-container",{transparent:y.value}]),style:{position:"absolute",top:"50%",right:"-2.2rem"},onClick:t[2]||(t[2]=s=>E(r.id))},[C(e(B))],2),(l(!0),m(w,null,S(e(x),s=>(l(),m("div",W,[a("div",null,f(s.text),1),n.editor===!1?(l(),g(e(v),{key:0,id:s.id+"right",class:"handle",type:"source",position:e(h).Right,style:{top:"1.4rem",left:"100% !important"}},null,8,["id","position"])):c("",!0),a("div",{class:"button-container",onClick:I=>F(s.id),style:{position:"absolute",right:"0"}},[C(e(B))],8,X)]))),256)),e(x).length<1?(l(),m("div",{key:2,class:"button",onClick:z}," Insert Default Action ")):c("",!0),(l(!0),m(w,null,S(e(p),s=>(l(),m("div",Y,[a("div",{id:s.id+"button",contenteditable:"true",onInput:I=>{_(I,s.id)}},f(s.text),41,Z),n.editor===!1?(l(),g(e(v),{key:0,id:s.id+"right",class:"handle",type:"source",position:e(h).Right,style:{top:"1.4rem",left:"100% !important"}},null,8,["id","position"])):c("",!0),a("div",{class:"button-container",onClick:I=>N(s.id),style:{position:"absolute",right:"0"}},[C(e(B))],8,tt)]))),256)),e(p).length<3?(l(),m("div",{key:3,class:"button",onClick:t[3]||(t[3]=s=>{R()})}," Insert Button ")):c("",!0)],32)]),_:1}))}},ut=G(et,[["__scopeId","data-v-5790ffdc"]]);export{ut as default};
