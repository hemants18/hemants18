import{s as I,K as D,T as L,r as x,O as H,o as p,c as b,a as e,w as P,v as q,u as d,b as $,d as K,f as s,g as t,k as m,t as l,i as V,F as Z,e as G,n as B,j as J,h as R}from"./app-586cbc19.js";import Q from"./App-b210138e.js";import{d as W}from"./debounce-f0e5e0a5.js";import{_ as X}from"./AlertModal-511f2bfb.js";import{u as Y}from"./useAlertModal-e2360484.js";import{_ as ee}from"./Table-3be4b86e.js";import{T as te,a as se,_ as y}from"./TableHeaderRowItem-aa192b53.js";import{T as le,a as oe,_}from"./TableBodyRowItem-405cc657.js";import{_ as ae}from"./Dropdown-5b156d2f.js";import{_ as re,a as U}from"./DropdownItem-659d2267.js";import{_ as ie}from"./Modal-a35cf5fb.js";import{_ as ne}from"./FormInput-bee1ab8e.js";import{t as A,_ as ue}from"./FormSelect-4a83dbbc.js";import{u as de}from"./usePlan-cacbaec5.js";import"./Sidebar-c20edeb2.js";import"./Menu-dd50bd69.js";import"./ProfileModal-e2807503.js";import"./FormPhoneInput-c57cb35b.js";import"./hidden-bc07d1fe.js";import"./use-text-value-a2f8b922.js";import"./transition-c0d64afd.js";import"./LangToggle-e8dc491d.js";import"./index-a65940f1.js";import"./MobileSidebar-68e85834.js";/* empty css              */import"./_baseGetTag-49d45606.js";import"./Pagination-834739c7.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-tree-walker-a3121160.js";const me={class:"md:bg-white flex items-center border border-primary md:border-none md:shadow-sm h-12 md:h-10 w-full md:w-80 rounded-[0.5rem] mb-6 text-xl md:text-sm"},pe=["placeholder"],ce={key:1,class:"pr-2"},fe={class:"py-1 rounded-[5px] text-xs px-3 bg-[#ddebf7] text-slate-700"},ve={__name:"TeamTable",props:{rows:{type:Object,required:!0},filters:{type:Object}},emits:["edit","delete"],setup(k,{emit:N}){var S;const g=k,M=I(()=>D().props.auth.user),{isOpenAlert:c,openAlert:w,confirmAlert:h}=Y(),C=L({test:null}),n=r=>{C.delete("/team/"+r)},j=r=>r===g.rows.data.length-1,v=x({search:(S=g.filters)==null?void 0:S.search}),T=x(!1),u=N,o=()=>{v.value.search=null,O()},f=W(()=>{T.value=!0,O()},1e3),O=()=>{H.visit("/team",{method:"get",data:v.value})};function z(r,i,a){u("edit",{id:r,role:i,email:a})}return(r,i)=>(p(),b(Z,null,[e("div",me,[i[6]||(i[6]=e("span",{class:"pl-3"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m15 15l6 6m-11-4a7 7 0 1 1 0-14a7 7 0 0 1 0 14Z"})])],-1)),P(e("input",{onInput:i[0]||(i[0]=(...a)=>d(f)&&d(f)(...a)),"onUpdate:modelValue":i[1]||(i[1]=a=>v.value.search=a),type:"text",class:"outline-none px-4 w-full",placeholder:r.$t("Search team")},null,40,pe),[[q,v.value.search]]),T.value===!1&&v.value.search?(p(),b("button",{key:0,onClick:o,type:"button",class:"pr-2"},[...i[4]||(i[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2zm3.7 12.3c.4.4.4 1 0 1.4c-.4.4-1 .4-1.4 0L12 13.4l-2.3 2.3c-.4.4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4l2.3-2.3l-2.3-2.3c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0l2.3 2.3l2.3-2.3c.4-.4 1-.4 1.4 0c.4.4.4 1 0 1.4L13.4 12l2.3 2.3z"})],-1)])])):$("",!0),T.value?(p(),b("span",ce,[...i[5]||(i[5]=[K('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="0 12 12;90 12 12;180 12 12;270 12 12"></animateTransform><animate attributeName="opacity" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.2s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="30 12 12;120 12 12;210 12 12;300 12 12"></animateTransform><animate attributeName="opacity" begin="0.2s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.4s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="60 12 12;150 12 12;240 12 12;330 12 12"></animateTransform><animate attributeName="opacity" begin="0.4s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle></svg>',1)])])):$("",!0)]),s(ee,{rows:k.rows},{default:t(()=>[s(te,null,{default:t(()=>[s(se,null,{default:t(()=>[s(y,{position:"first"},{default:t(()=>[m(l(r.$t("Name")),1)]),_:1}),s(y,null,{default:t(()=>[m(l(r.$t("Email")),1)]),_:1}),s(y,null,{default:t(()=>[m(l(r.$t("Role")),1)]),_:1}),s(y,null,{default:t(()=>[m(l(r.$t("Status")),1)]),_:1}),s(y,null,{default:t(()=>[m(l(r.$t("Last updated")),1)]),_:1}),M.value.teams[0].role==="owner"?(p(),V(y,{key:0,position:"last"})):$("",!0)]),_:1})]),_:1}),s(le,null,{default:t(()=>[(p(!0),b(Z,null,G(k.rows.data,(a,F)=>(p(),V(oe,{key:F,class:B(j(F)?"":"border-b")},{default:t(()=>[s(_,{position:"first",class:"capitalize"},{default:t(()=>[m(l(a.user.first_name+" "+a.user.last_name),1)]),_:2},1024),s(_,{class:"hidden sm:table-cell"},{default:t(()=>[m(l(a.user.email),1)]),_:2},1024),s(_,{class:"hidden sm:table-cell"},{default:t(()=>[m(l(r.$t(a.role)),1)]),_:2},1024),s(_,{class:"capitalize hidden sm:table-cell"},{default:t(()=>[e("span",fe,l(r.$t(a.status)),1)]),_:2},1024),s(_,{class:"hidden sm:table-cell"},{default:t(()=>[m(l(a.updated_at),1)]),_:2},1024),M.value.teams[0].role==="owner"?(p(),V(_,{key:0,position:"last"},{default:t(()=>[a.role!="owner"?(p(),V(ae,{key:0,align:"right",class:"mt-2"},{items:t(()=>[s(re,null,{default:t(()=>[s(U,{as:"button",onClick:E=>z(a.uuid,a.role,a.user.email)},{default:t(()=>[m(l(r.$t("Edit")),1)]),_:1},8,["onClick"]),s(U,{as:"button",onClick:E=>d(w)(a.uuid)},{default:t(()=>[m(l(r.$t("Remove user")),1)]),_:1},8,["onClick"])]),_:2},1024)]),default:t(()=>[i[7]||(i[7]=e("button",{class:"inline-flex w-full justify-center rounded-md text-sm font-medium text-black hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},[e("span",{class:"hover:bg-[#F6F7F9] hover:rounded-full w-[fit-content] p-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 16a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2Z"})])])],-1))]),_:2},1024)):$("",!0)]),_:2},1024)):$("",!0)]),_:2},1032,["class"]))),128))]),_:1})]),_:1},8,["rows"]),s(X,{modelValue:d(c),"onUpdate:modelValue":i[2]||(i[2]=a=>J(c)?c.value=a:null),onConfirm:i[3]||(i[3]=()=>d(h)(n)),label:r.$t("Delete row"),description:r.$t("Are you sure you want to delete this row? This action can not be undone")},null,8,["modelValue","label","description"])],64))}},be={class:"bg-white md:bg-inherit pt-10 px-4 md:pt-8 md:p-8 rounded-[5px] text-[#000] h-full md:overflow-y-auto"},ge={class:"flex justify-between"},we={class:"text-xl mb-1"},he={class:"flex items-center text-sm leading-6"},ye={class:"ml-1 mt-1"},_e={class:"mb-6 flex items-center leading-6"},$e={class:"ml-1 text-sm mt-1"},xe={class:"text-indigo-600 ml-1"},ke={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},Ce={class:"mt-4 flex"},Te=["disabled"],Ve={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Me={key:1},ot={__name:"Index",props:{rows:Object,filters:Object},setup(k){const{getLimit:N}=de(),g=N("team_limit"),M=k,c=x(!1),w=x("/team/invite"),h=x("post"),C=x("Invite user"),n=L({email:null,role:null}),j=[{value:"manager",label:A("Manager")},{value:"agent",label:A("Agent")}],v=(u,o={})=>{C.value=A("Invite user"),w.value="/team/invite",h.value="post",u?(C.value=A("Update user"),w.value="/team/"+u.id,h.value="put",n.email=u.email,n.role=u.role,c.value=!0):(n.email=null,n.role=null,c.value=!0)},T=()=>{h.value==="post"?n.post(w.value,{onFinish:()=>{c.value=!1}}):n.put(w.value,{onFinish:()=>{c.value=!1}})};return(u,o)=>(p(),V(Q,null,{default:t(()=>[e("div",be,[e("div",ge,[e("div",null,[e("h2",we,l(u.$t("Team")),1),e("p",he,[o[5]||(o[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),e("span",ye,l(u.$t("Add, edit and delete accounts in your team")),1)]),e("p",_e,[o[6]||(o[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),e("span",$e,[m(l(u.$t("Team"))+" "+l(u.$t("Plan details"))+": ",1),e("small",xe,l(d(g).label),1)])])]),e("div",null,[d(g).isUnlimited||d(g).remaining>0?(p(),b("button",{key:0,onClick:o[0]||(o[0]=f=>v()),class:"rounded-md bg-indigo-600 px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},l(u.$t("Invite user")),1)):$("",!0)])]),s(ve,{rows:M.rows,onEdit:v},null,8,["rows"])]),s(ie,{label:C.value,isOpen:c.value},{default:t(()=>[e("div",ke,[e("form",{onSubmit:o[4]||(o[4]=R(f=>T(),["prevent"])),class:"grid gap-x-6 gap-y-4 sm:grid-cols-6"},[s(ne,{modelValue:d(n).email,"onUpdate:modelValue":o[1]||(o[1]=f=>d(n).email=f),error:d(n).errors.email,name:u.$t("Email"),type:"email",class:B("sm:col-span-6"),disabled:h.value==="put"},null,8,["modelValue","error","name","disabled"]),s(ue,{modelValue:d(n).role,"onUpdate:modelValue":o[2]||(o[2]=f=>d(n).role=f),error:d(n).errors.role,options:j,name:u.$t("Role"),class:B("sm:col-span-6"),placeholder:u.$t("Select Role")},null,8,["modelValue","error","name","placeholder"]),e("div",Ce,[e("button",{type:"button",onClick:o[3]||(o[3]=R(f=>c.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},l(u.$t("Cancel")),1),e("button",{class:B(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":d(n).processing}]),disabled:d(n).processing},[d(n).processing?(p(),b("svg",Ve,[...o[7]||(o[7]=[e("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),e("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[e("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)])])):(p(),b("span",Me,l(u.$t("Save")),1))],10,Te)])],32)])]),_:1},8,["label","isOpen"])]),_:1}))}};export{ot as default};
