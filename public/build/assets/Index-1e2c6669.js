import le from"./App-b210138e.js";import{r as S,T as se,o as n,c as m,a as l,t as u,i as p,g as $,k,u as a,l as w,h as oe,f as c,n as d,F as q,e as X,b as y,O as re}from"./app-586cbc19.js";import{_ as Y}from"./FormCheckbox-864fccae.js";import{_ as v}from"./FormInput-bee1ab8e.js";import{_ as ne}from"./FormPhoneInput-c57cb35b.js";import{_ as C,t as de}from"./FormSelect-4a83dbbc.js";import{_ as ee}from"./FormTextArea-8430fc21.js";import{_ as ie,a as me}from"./ContactTable-8cf4af13.js";import{_ as ce}from"./ContactInfo-d4b7fdbc.js";import{u as ue}from"./usePlan-cacbaec5.js";import"./Sidebar-c20edeb2.js";import"./Menu-dd50bd69.js";import"./Modal-a35cf5fb.js";import"./transition-c0d64afd.js";import"./hidden-bc07d1fe.js";import"./ProfileModal-e2807503.js";import"./use-text-value-a2f8b922.js";import"./LangToggle-e8dc491d.js";import"./index-a65940f1.js";import"./MobileSidebar-68e85834.js";/* empty css              */import"./debounce-f0e5e0a5.js";import"./_baseGetTag-49d45606.js";import"./AlertModal-511f2bfb.js";import"./useAlertModal-e2360484.js";import"./Dropdown-5b156d2f.js";import"./use-tree-walker-a3121160.js";import"./DropdownItem-659d2267.js";import"./Pagination-834739c7.js";import"./_plugin-vue_export-helper-c27b6911.js";const pe={class:"h-20 bg-white border-b border-1 md:flex items-center justify-between px-10 hidden"},fe={key:0,class:"text-xl"},be={key:1,class:"text-xl"},ye={class:"flex justify-center md:h-[90vh] md:overflow-y-scroll"},ge={class:"flex justify-center items-center"},ve={class:"rounded-full w-40 h-40 m-4"},Ve={key:0,class:"text-gray-500",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},he=["src"],xe={for:"file-upload",class:"cursor-pointer inline-flex justify-center rounded-md border border-transparent bg-slate-200 px-4 py-2 text-sm text-slate-700 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},$e={class:"grid gap-x-6 gap-y-4 sm:grid-cols-6 pb-6 border-b"},_e={key:0,class:"grid gap-x-6 gap-y-4 sm:grid-cols-2 mt-4 pb-6 border-b"},ke={class:"grid gap-x-6 gap-y-4 sm:grid-cols-6 pt-4 pb-6"},we={key:1,class:"grid gap-x-6 gap-y-4 sm:grid-cols-2 mb-8 pt-4 border-t"},Ue={class:"mt-4 mb-10 pb-10 flex"},Se={class:d("inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2")},te={__name:"CreateForm",props:["contactGroups","contact","fields","locationSettings"],setup(f){var z,O,A,G,F,B,L,M,N,Z,D,E,P,I,J,R,T,H,K,Q,W;const r=f,V=(z=r.contact)!=null&&z.avatar?S((O=r.contact)==null?void 0:O.avatar):S(null);S();const _=r.fields.reduce((s,o)=>(s[o.name]="",s),{}),h=(s,o)=>{const e=JSON.parse(s);return(e==null?void 0:e[o])??""},t=se({first_name:((A=r.contact)==null?void 0:A.first_name)??null,last_name:((G=r.contact)==null?void 0:G.last_name)??null,phone:((F=r.contact)==null?void 0:F.phone)??null,email:((B=r.contact)==null?void 0:B.email)??null,group:((M=(L=r.contact)==null?void 0:L.contact_group)==null?void 0:M.uuid)??null,file:null,street:(N=r.contact)!=null&&N.address?h((Z=r.contact)==null?void 0:Z.address,"street"):null,city:(D=r.contact)!=null&&D.address?h((E=r.contact)==null?void 0:E.address,"city"):null,state:(P=r.contact)!=null&&P.address?h((I=r.contact)==null?void 0:I.address,"state"):null,zip:(J=r.contact)!=null&&J.address?h((R=r.contact)==null?void 0:R.address,"zip"):null,country:(T=r.contact)!=null&&T.address?h((H=r.contact)==null?void 0:H.address,"country"):null,metadata:(K=r.contact)!=null&&K.metadata&&Array.isArray((Q=r.contact)==null?void 0:Q.metadata)?JSON.parse((W=r.contact)==null?void 0:W.metadata):_}),b=()=>r.contactGroups.map(s=>({value:s.uuid,label:s.name})),U=s=>{const e=s.target.files[0];if(e&&e.size>5242880)alert(de("file size exceeds the limit. Max allowed size:")+" 5242880b"),s.target.value=null;else{const x=new FileReader;x.onload=i=>{V.value=i.target.result},t.file=e,x.readAsDataURL(e)}},ae=()=>{r.contact?t.post("/contacts/"+r.contact.uuid):t.post("/contacts")},j=s=>s.split(", ").map(o=>({label:o,value:o}));return(s,o)=>(n(),m(q,null,[l("div",pe,[l("div",null,[r.contact?(n(),m("h1",be,u(s.$t("Edit contact")),1)):(n(),m("h1",fe,u(s.$t("Add contact")),1))]),l("div",null,[r.contact?(n(),p(a(w),{key:1,href:"/contacts/"+r.contact.uuid,class:"inline-flex justify-center rounded-md border border-transparent bg-slate-200 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},{default:$(()=>[k(u(s.$t("Back")),1)]),_:1},8,["href"])):(n(),p(a(w),{key:0,href:"/contacts",class:"inline-flex justify-center rounded-md border border-transparent bg-slate-200 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},{default:$(()=>[k(u(s.$t("Cancel")),1)]),_:1}))])]),l("div",ye,[l("form",{onSubmit:o[10]||(o[10]=oe(e=>ae(),["prevent"])),class:"w-[30em]"},[l("div",ge,[l("div",ve,[a(V)===null?(n(),m("svg",Ve,[...o[11]||(o[11]=[l("path",{"fill-rule":"evenodd",d:"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z","clip-rule":"evenodd"},null,-1)])])):(n(),m("img",{key:1,class:"w-40 h-40 rounded-full object-cover",src:a(V),alt:"Contact Image"},null,8,he))]),l("input",{type:"file",class:"sr-only",accept:".jpg, .png",id:"file-upload",onChange:U},null,32),l("label",xe,u(s.$t("Upload image")),1)]),l("div",$e,[c(v,{modelValue:a(t).first_name,"onUpdate:modelValue":o[0]||(o[0]=e=>a(t).first_name=e),name:s.$t("First name"),error:a(t).errors.first_name,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),c(v,{modelValue:a(t).last_name,"onUpdate:modelValue":o[1]||(o[1]=e=>a(t).last_name=e),name:s.$t("Last name"),error:a(t).errors.last_name,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),c(ne,{modelValue:a(t).phone,"onUpdate:modelValue":o[2]||(o[2]=e=>a(t).phone=e),name:s.$t("Phone"),error:a(t).errors.phone,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),c(v,{modelValue:a(t).email,"onUpdate:modelValue":o[3]||(o[3]=e=>a(t).email=e),name:s.$t("Email"),error:a(t).errors.email,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),c(C,{modelValue:a(t).group,"onUpdate:modelValue":o[4]||(o[4]=e=>a(t).group=e),name:s.$t("Group"),error:a(t).errors.group,options:b(),type:"text",class:d("sm:col-span-6")},null,8,["modelValue","name","error","options"])]),f.locationSettings==="before"?(n(),m("div",_e,[(n(!0),m(q,null,X(r.fields,(e,x)=>(n(),m("div",{key:x,class:d(e.type!="input"?"sm:col-span-2":"sm:col-span-1")},[e.type==="input"?(n(),p(v,{key:0,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":i=>a(t).metadata[e.name]=i,name:e.name,label:s.$t(e.name),type:e.value,class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","label","type","required"])):y("",!0),e.type==="textarea"?(n(),p(ee,{key:1,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":i=>a(t).metadata[e.name]=i,name:e.name,label:s.$t(e.name),class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","label","required"])):y("",!0),e.type==="select"?(n(),p(C,{key:2,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":i=>a(t).metadata[e.name]=i,name:e.name,options:j(e.value),class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","options","required"])):y("",!0),e.type==="checkbox"?(n(),p(Y,{key:3,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":i=>a(t).metadata[e.name]=i,name:e.name,label:e.name,class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","label","required"])):y("",!0)],2))),128))])):y("",!0),l("div",ke,[c(v,{modelValue:a(t).street,"onUpdate:modelValue":o[5]||(o[5]=e=>a(t).street=e),name:s.$t("Street"),error:a(t).errors.street,type:"text",class:d("sm:col-span-6")},null,8,["modelValue","name","error"]),c(v,{modelValue:a(t).city,"onUpdate:modelValue":o[6]||(o[6]=e=>a(t).city=e),name:s.$t("City"),error:a(t).errors.city,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),c(v,{modelValue:a(t).state,"onUpdate:modelValue":o[7]||(o[7]=e=>a(t).state=e),name:s.$t("State"),error:a(t).errors.state,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),c(v,{modelValue:a(t).zip,"onUpdate:modelValue":o[8]||(o[8]=e=>a(t).zip=e),name:s.$t("Zip code"),error:a(t).errors.zip,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"]),c(v,{modelValue:a(t).country,"onUpdate:modelValue":o[9]||(o[9]=e=>a(t).country=e),name:s.$t("Country"),error:a(t).errors.country,type:"text",class:d("sm:col-span-3")},null,8,["modelValue","name","error"])]),f.locationSettings==="after"?(n(),m("div",we,[(n(!0),m(q,null,X(r.fields,(e,x)=>(n(),m("div",{key:x,class:d(e.type!="input"?"sm:col-span-2":"sm:col-span-1")},[e.type==="input"?(n(),p(v,{key:0,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":i=>a(t).metadata[e.name]=i,name:e.name,label:s.$t(e.name),type:e.value,class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","label","type","required"])):y("",!0),e.type==="textarea"?(n(),p(ee,{key:1,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":i=>a(t).metadata[e.name]=i,name:e.name,label:s.$t(e.name),class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","label","required"])):y("",!0),e.type==="select"?(n(),p(C,{key:2,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":i=>a(t).metadata[e.name]=i,name:e.name,options:j(e.value),class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","options","required"])):y("",!0),e.type==="checkbox"?(n(),p(Y,{key:3,modelValue:a(t).metadata[e.name],"onUpdate:modelValue":i=>a(t).metadata[e.name]=i,name:e.name,label:e.name,class:d("sm:col-span-2"),required:e.required===1},null,8,["modelValue","onUpdate:modelValue","name","label","required"])):y("",!0)],2))),128))])):y("",!0),l("div",Ue,[c(a(w),{href:"/contacts",class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},{default:$(()=>[k(u(s.$t("Cancel")),1)]),_:1}),l("button",Se,[l("span",null,u(s.$t("Save")),1)])])],32)])],64))}},qe={class:"md:bg-inherit bg-white md:flex md:flex-grow capitalize"},Ce={class:"px-4 pt-4"},je={class:"flex justify-between mt-2"},ze={class:"space-x-1 text-xl"},Oe={class:"ml-1 text-xs mt-1"},Ae={class:"text-indigo-600 ml-1"},Ge={class:"flex space-x-2 items-center"},Fe={class:"md:w-[70%] bg-cover md:h-[100vh] md:overflow-y-hidden"},Be={key:0},Le={key:1},Me={key:0},Ne={key:1},Ze={class:"md:flex justify-center pt-20 hidden"},De={class:"border pt-20 py-10 w-[30em] rounded-xl bg-white"},Ee={class:"text-center text-2xl text-slate-500 mb-6"},Pe={class:"text-center text-slate-600"},Ie={class:"flex justify-center space-x-4 mt-6"},xt={__name:"Index",props:{rows:Object,filters:Object,rowCount:Number,contactGroups:Object,contact:Object,editContact:Boolean,fields:Object,locationSettings:String,flash:Object},setup(f){const{getLimit:r}=ue(),V=r("contacts_limit"),g=f,_=S(!1),h=t=>{re.visit("/contacts",{method:"get",data:t})};return(t,b)=>(n(),m(q,null,[c(le,null,{default:$(()=>[l("div",qe,[l("div",{class:d(["md:w-[30%] flex-col h-full bg-white border-r border-l md:flex",t.$page.url==="/contacts/add"||f.contact?"hidden":""])},[l("div",Ce,[l("div",je,[l("div",ze,[l("h2",null,u(t.$t("Contacts")),1),l("span",Oe,[k(u(t.$t("Contacts"))+" "+u(t.$t("Plan details"))+": ",1),l("small",Ae,u(a(V).label),1)])]),l("div",Ge,[a(V).isUnlimited||a(V).remaining>0?(n(),p(a(w),{key:0,href:"/contacts/add",title:"Add Contact"},{default:$(()=>[...b[2]||(b[2]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24"},[l("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[l("path",{d:"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12Zm10-8a8 8 0 1 0 0 16a8 8 0 0 0 0-16Z"}),l("path",{d:"M13 7a1 1 0 1 0-2 0v4H7a1 1 0 1 0 0 2h4v4a1 1 0 1 0 2 0v-4h4a1 1 0 1 0 0-2h-4V7Z"})])],-1)])]),_:1})):y("",!0)])])]),c(me,{rows:g.rows,filters:g.filters,type:"contact",onCallback:h},null,8,["rows","filters"])],2),l("div",Fe,[f.contact?(n(),m("div",Be,[f.editContact?(n(),p(te,{key:1,contactGroups:g.contactGroups,contact:g.contact,fields:g.fields,locationSettings:f.locationSettings},null,8,["contactGroups","contact","fields","locationSettings"])):(n(),p(ce,{key:0,class:"pt-20",contact:f.contact,fields:g.fields,locationSettings:f.locationSettings},null,8,["contact","fields","locationSettings"]))])):(n(),m("div",Le,[t.$page.url==="/contacts/add"?(n(),m("div",Me,[c(te,{contactGroups:g.contactGroups,contact:g.contact,fields:g.fields,locationSettings:f.locationSettings},null,8,["contactGroups","contact","fields","locationSettings"])])):(n(),m("div",Ne,[l("div",Ze,[l("div",De,[l("h2",Ee,u(t.$t("Select contact")),1),b[3]||(b[3]=l("div",{class:"flex justify-center"},[l("div",{class:"border-r border-slate-500 h-10"})],-1)),l("h2",Pe,u(t.$t("Or")),1),b[4]||(b[4]=l("div",{class:"flex justify-center"},[l("div",{class:"border-r border-slate-500 h-10"})],-1)),l("div",Ie,[c(a(w),{href:"/contacts/add",class:"bg-primary rounded-lg text-sm text-white p-2 px-8 text-center"},{default:$(()=>[k(u(t.$t("Add contact")),1)]),_:1}),l("button",{onClick:b[0]||(b[0]=U=>_.value=!0),class:"bg-primary rounded-lg text-sm text-white p-2 px-8 text-center"},u(t.$t("Bulk upload")),1)])])])]))]))])])]),_:1}),c(ie,{type:"contact",modelValue:_.value,"onUpdate:modelValue":b[1]||(b[1]=U=>_.value=U)},null,8,["modelValue"])],64))}};export{xt as default};
