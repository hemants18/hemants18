import x from"./Layout-ff8a8ca0.js";import{r as d,T as A,i as y,g as h,o as v,a as e,t as i,c as k,b as B,k as F,f as I,u as w}from"./app-71688fef.js";import"./FormSelect-4c8a2141.js";import{d as S}from"./vuedraggable.umd-dc44ff16.js";import"./App-dbd17314.js";import"./Sidebar-4facdee5.js";import"./Menu-51e1dddd.js";import"./Modal-0745b486.js";import"./transition-69c2c596.js";import"./hidden-1e440d84.js";import"./ProfileModal-a0ead7b3.js";import"./FormInput-20df0373.js";import"./use-text-value-42fe46f0.js";import"./index-e82fb76e.js";import"./MobileSidebar-11af113e.js";/* empty css              */const N={class:"md:h-[90vh]"},R={class:"flex justify-center items-center"},C={class:"md:w-[60em]"},V={class:"bg-white border border-slate-200 rounded-lg py-2 text-sm mb-4 pb-4 px-4 mb-20"},$={class:"w-full py-2 mb-2 mt-2"},M={class:"flex w-full mb-4"},j={class:"text-md"},E={class:"text-[16px]"},D={class:"flex items-center mt-1 text-slate-500"},O={key:0,class:"text-sm mt-2 bg-orange-100 px-2 py-1 rounded-md w-[fit-content]"},T={class:"flex gap-x-2 bg-slate-50 rounded-md mb-2 p-2 border w-[20em] cursor-pointer"},ne={__name:"Automation",props:["rows","filters","settings","modules"],setup(q){var p,f;const a=q,u=d(a.settings.metadata),l=d(u.value?JSON.parse(u.value):null),r=s=>{const t=a.modules.find(n=>n.name===s);return t&&t.status===1},g=d(["Basic Replies",r("Flow builder")?"Automated Flows":null,r("AI Assistant")?"AI Reply Assistant":null].filter(s=>s!==null)),m=A({response_sequence:((f=(p=l.value)==null?void 0:p.automation)==null?void 0:f.response_sequence)??g.value}),c={"Automated Flows":"Flow builder","AI Reply Assistant":"AI Assistant"};(()=>{var s,t;if((t=(s=l.value)==null?void 0:s.automation)!=null&&t.response_sequence){const n=l.value.automation.response_sequence.filter(o=>o==="Basic Replies"?!0:r(c[o]||o));Object.keys(c).forEach(o=>{const b=c[o];r(b)&&!n.includes(o)&&n.push(o)}),m.response_sequence=n}})();const _=async()=>{m.post("/settings/automation",{preserveScroll:!0})};return(s,t)=>(v(),y(x,{modules:a.modules},{default:h(()=>[e("div",N,[e("div",R,[e("div",C,[e("div",V,[e("div",$,[e("div",M,[e("div",j,[e("h4",E,i(s.$t("Response Sequence Priority")),1),e("span",D,i(s.$t("Choose the order in which the system searches for a matching response when replying to messages. Set the sequence for Basic Replies, Automated Flows, and AI Assistant to control how replies are prioritized.")),1),r("Flow builder")?(v(),k("div",O,i(s.$t("If a flow is already active for a contact, the response sequence will not be followed.")),1)):B("",!0)])]),e("div",null,[t[2]||(t[2]=e("span",{class:"mb-2 flex items-center text-slate-700"},[e("svg",{class:"mr-2",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})]),F(" Drag to reorder ")],-1)),I(w(S),{list:w(m).response_sequence,class:"mt-2",onEnd:t[0]||(t[0]=n=>_())},{item:h(({index:n,element:o})=>[e("div",T,[t[1]||(t[1]=e("span",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M9 19.23q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m6 0q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m-6-6q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m6 0q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m-6-6q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m6 0q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36"})])],-1)),e("span",null,i(o),1)])]),_:1},8,["list"])])])])])])])]),_:1},8,["modules"]))}};export{ne as default};
