import D from"./App-b210138e.js";import{o as c,c as m,a as e,T as R,r as A,O as Z,w as U,v as P,u as d,b as B,d as H,f as r,g as a,k as i,t as o,F as M,e as O,i as k,n as y,l as v,j as I,X as q}from"./app-586cbc19.js";import{d as E}from"./debounce-f0e5e0a5.js";import{_ as X}from"./AlertModal-511f2bfb.js";import{u as G}from"./useAlertModal-e2360484.js";import{_ as J}from"./Table-3be4b86e.js";import{T as K,a as Q,_}from"./TableHeaderRowItem-aa192b53.js";import{T as W,a as Y,_ as w}from"./TableBodyRowItem-405cc657.js";import{_ as ee}from"./Dropdown-5b156d2f.js";import{_ as te,a as L}from"./DropdownItem-659d2267.js";import{u as ae}from"./usePlan-cacbaec5.js";import"./Sidebar-c20edeb2.js";import"./Menu-dd50bd69.js";import"./Modal-a35cf5fb.js";import"./transition-c0d64afd.js";import"./hidden-bc07d1fe.js";import"./ProfileModal-e2807503.js";import"./FormInput-bee1ab8e.js";import"./FormPhoneInput-c57cb35b.js";import"./FormSelect-4a83dbbc.js";import"./use-text-value-a2f8b922.js";import"./LangToggle-e8dc491d.js";import"./index-a65940f1.js";import"./MobileSidebar-68e85834.js";/* empty css              */import"./_baseGetTag-49d45606.js";import"./Pagination-834739c7.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-tree-walker-a3121160.js";function re(f,g){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"})])}function oe(f,g){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])}function ne(f,g){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})])}function le(f,g){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})])}function se(f,g){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])}const ie={class:"bg-[#f0f2f5] md:bg-white flex items-center md:border md:border-primary md:border-none md:shadow-sm h-12 md:h-10 w-full md:w-80 rounded-xl mb-6 text-sm mt-6"},de=["placeholder"],ce={key:1,class:"pr-2"},ue={class:"bg-slate-200 px-1 py-1 rounded-lg mr-1 hidden md:inline-block"},me={class:"bg-slate-200 px-1 py-1 rounded-lg mr-1 hidden md:inline-block"},fe={__name:"CampaignTable",props:{rows:{type:Object,required:!0},filters:{type:Object}},emits:["delete"],setup(f,{emit:g}){const b=f,{isOpenAlert:h,openAlert:$,confirmAlert:C}=G(),T=R({test:null}),j=l=>{T.delete("/campaigns/"+l)},s=A({search:b.filters.search}),p=l=>l===b.rows.data.length-1,x=A(!1),u=(l,n,t)=>n>0?(l/n*100).toFixed(2)+"%":(l/t*100).toFixed(2)+"%",V=(l,n,t)=>n>0?l+"/"+n:l+"/"+t,F=()=>{s.value.search=null,N()},S=E(()=>{x.value=!0,N()},1e3),N=()=>{Z.visit("/campaigns",{method:"get",data:s.value})};return(l,n)=>(c(),m(M,null,[e("div",ie,[n[6]||(n[6]=e("span",{class:"pl-3"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m15 15l6 6m-11-4a7 7 0 1 1 0-14a7 7 0 0 1 0 14Z"})])],-1)),U(e("input",{onInput:n[0]||(n[0]=(...t)=>d(S)&&d(S)(...t)),"onUpdate:modelValue":n[1]||(n[1]=t=>s.value.search=t),type:"text",class:"outline-none px-4 w-full bg-inherit",placeholder:l.$t("Search campaigns")},null,40,de),[[P,s.value.search]]),x.value===!1&&s.value.search?(c(),m("button",{key:0,onClick:F,type:"button",class:"pr-2"},[...n[4]||(n[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2zm3.7 12.3c.4.4.4 1 0 1.4c-.4.4-1 .4-1.4 0L12 13.4l-2.3 2.3c-.4.4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4l2.3-2.3l-2.3-2.3c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0l2.3 2.3l2.3-2.3c.4-.4 1-.4 1.4 0c.4.4.4 1 0 1.4L13.4 12l2.3 2.3z"})],-1)])])):B("",!0),x.value?(c(),m("span",ce,[...n[5]||(n[5]=[H('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="0 12 12;90 12 12;180 12 12;270 12 12"></animateTransform><animate attributeName="opacity" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.2s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="30 12 12;120 12 12;210 12 12;300 12 12"></animateTransform><animate attributeName="opacity" begin="0.2s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.4s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="60 12 12;150 12 12;240 12 12;330 12 12"></animateTransform><animate attributeName="opacity" begin="0.4s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle></svg>',1)])])):B("",!0)]),r(J,{rows:f.rows},{default:a(()=>[r(K,null,{default:a(()=>[r(Q,null,{default:a(()=>[r(_,{position:"first"},{default:a(()=>[i(o(l.$t("Campaign name")),1)]),_:1}),r(_,{class:"hidden md:table-cell"},{default:a(()=>[i(o(l.$t("Template")),1)]),_:1}),r(_,{class:"hidden md:table-cell"},{default:a(()=>[i(o(l.$t("Contacts")),1)]),_:1}),r(_,null,{default:a(()=>[i(o(l.$t("Delivery rate")),1)]),_:1}),r(_,null,{default:a(()=>[i(o(l.$t("Read rate")),1)]),_:1}),r(_,null,{default:a(()=>[i(o(l.$t("Status")),1)]),_:1}),r(_,{position:"last"})]),_:1})]),_:1}),r(W,null,{default:a(()=>[(c(!0),m(M,null,O(f.rows.data,(t,z)=>(c(),k(Y,{key:z,class:y(p(z)?"":"border-b")},{default:a(()=>[r(w,{position:"first"},{default:a(()=>[r(d(v),{href:"/campaigns/"+t.uuid,class:"block w-full"},{default:a(()=>[i(o(t.name),1)]),_:2},1032,["href"])]),_:2},1024),r(w,{class:"hidden md:table-cell"},{default:a(()=>[r(d(v),{href:"/campaigns/"+t.uuid,class:"block w-full"},{default:a(()=>[i(o(t.template.name),1)]),_:2},1032,["href"])]),_:2},1024),r(w,{class:"hidden md:table-cell"},{default:a(()=>[r(d(v),{href:"/campaigns/"+t.uuid,class:"block w-full"},{default:a(()=>[i(o(t.contacts_count===0?t.contact_group_count:t.contacts_count),1)]),_:2},1032,["href"])]),_:2},1024),r(w,{class:"hidden sm:table-cell"},{default:a(()=>[r(d(v),{href:"/campaigns/"+t.uuid,class:"block w-full"},{default:a(()=>[e("span",ue,o(u(t.delivery_count,t.contacts_count,t.contact_group_count)),1),i(" "+o(V(t.delivery_count,t.contacts_count,t.contact_group_count)),1)]),_:2},1032,["href"])]),_:2},1024),r(w,{class:"hidden sm:table-cell"},{default:a(()=>[r(d(v),{href:"/campaigns/"+t.uuid,class:"block w-full"},{default:a(()=>[e("span",me,o(u(t.read_count,t.contacts_count,t.contact_group_count)),1),i(" "+o(V(t.read_count,t.contacts_count,t.contact_group_count)),1)]),_:2},1032,["href"])]),_:2},1024),r(w,null,{default:a(()=>[r(d(v),{href:"/campaigns/"+t.uuid,class:"flex items-center w-full capitalize"},{default:a(()=>[i(o(t.status),1)]),_:2},1032,["href"])]),_:2},1024),r(w,{position:"last"},{default:a(()=>[r(ee,{align:"right",class:"mt-2"},{items:a(()=>[r(te,null,{default:a(()=>[r(L,{href:"/campaigns/"+t.uuid},{default:a(()=>[i(o(l.$t("View")),1)]),_:1},8,["href"]),r(L,{as:"button",onClick:$e=>d($)(t.uuid)},{default:a(()=>[i(o(l.$t("Delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),default:a(()=>[n[7]||(n[7]=e("button",{class:"inline-flex w-full justify-center rounded-md text-sm font-medium text-black hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},[e("span",{class:"hover:bg-[#F6F7F9] hover:rounded-full w-[fit-content] p-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 16a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2Z"})])])],-1))]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1},8,["rows"]),r(X,{modelValue:d(h),"onUpdate:modelValue":n[2]||(n[2]=t=>I(h)?h.value=t:null),onConfirm:n[3]||(n[3]=()=>d(C)(j)),label:l.$t("Delete row"),description:l.$t("Are you sure you want to delete this campaign? This action will only delete the campaign; sent messages will not be deleted from the chat history.")},null,8,["modelValue","label","description"])],64))}},pe={class:"bg-white md:bg-inherit pt-0 px-4 md:pt-8 md:p-8 rounded-[5px] text-[#000] overflow-y-scroll capitalize"},ge={class:"md:flex justify-between mt-8 md:mt-0 hidden"},he={class:"text-xl mb-1"},_e={class:"md:flex items-center text-sm leading-6 text-gray-600 hidden"},we={class:"ml-1 mt-1"},ve={class:"mb-6 flex items-center leading-6"},be={class:"ml-1 text-sm mt-1"},xe={class:"text-indigo-600 ml-1"},ke={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},ye={class:"text-xs text-gray-500 capitalize"},et={__name:"Index",props:{rows:Object,filters:Object,statusSummary:Object},setup(f){const{getLimit:g}=ae(),b=g("campaign_limit"),h=f,$=s=>s.replace(/_/g," ").replace(/\b\w/g,p=>p.toUpperCase()),C=s=>{switch(s){case"total_sent_count":case"sent":return le;case"total_delivered_count":case"delivered":return ne;case"total_read_count":case"read":return oe;case"total_failed_count":case"failed":return se;default:return re}},T=s=>({sent:"bg-blue-100",total_sent_count:"bg-blue-100",delivered:"bg-indigo-100",total_delivered_count:"bg-indigo-100",read:"bg-green-100",total_read_count:"bg-green-100",failed:"bg-red-100",total_failed_count:"bg-red-100"})[s]||"bg-gray-100",j=s=>({sent:"text-blue-600",total_sent_count:"text-blue-600",delivered:"text-indigo-600",total_delivered_count:"text-indigo-600",read:"text-green-600",total_read_count:"text-green-600",failed:"text-red-600",total_failed_count:"text-red-600"})[s]||"text-gray-600";return(s,p)=>(c(),k(D,null,{default:a(()=>[e("div",pe,[e("div",ge,[e("div",null,[e("h2",he,o(s.$t("Campaigns")),1),e("p",_e,[p[0]||(p[0]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),e("span",we,o(s.$t("Add campaigns")),1)]),e("p",ve,[p[1]||(p[1]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),e("span",be,[i(o(s.$t("Campaigns"))+" "+o(s.$t("Plan details"))+": ",1),e("small",xe,o(d(b).label),1)])])]),e("div",null,[d(b).isUnlimited||d(b).remaining>0?(c(),k(d(v),{key:0,href:"/campaigns/create",class:"rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 md:block hidden"},{default:a(()=>[i(o(s.$t("Create campaign")),1)]),_:1})):B("",!0)])]),e("div",ke,[(c(!0),m(M,null,O(h.statusSummary,(x,u)=>(c(),m("div",{key:u,class:"bg-white rounded-md p-4 shadow flex items-center justify-between"},[e("div",null,[e("p",ye,o($(u)),1),e("p",{class:y(["text-xl font-semibold",{"text-blue-600":u==="total_sent_count","text-indigo-600":u==="total_delivered_count","text-green-600":u==="total_read_count","text-red-600":u==="total_failed_count"}])},o(x),3)]),e("div",{class:y(["h-10 w-10 rounded-full flex items-center justify-center",T(u)])},[(c(),k(q(C(u)),{class:y(["h-5 w-5",j(u)])},null,8,["class"]))],2)]))),128))]),r(fe,{rows:h.rows,filters:h.filters},null,8,["rows","filters"])])]),_:1}))}};export{et as default};
