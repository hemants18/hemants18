import{C as U,r as O,L as Q,s as T,Q as te,y as W,B as pe,M as me,F as fe,J as ne,R as Y,K as L,T as G,o as V,i as H,g as $,f as b,u as l,a as r,t as I,n as k,b as Z,h as J,c as E,k as ae,O as le}from"./app-586cbc19.js";import{_ as j}from"./FormInput-bee1ab8e.js";import{_ as ce}from"./FormPhoneInput-c57cb35b.js";import{_ as ve}from"./FormSelect-4a83dbbc.js";import{a as be,f as oe,O as M,o as h,H as z,T as ge,t as ie,N as se,u as q,b as _,c as R,m as ye,P as N,d as C}from"./hidden-bc07d1fe.js";import{b as xe}from"./use-text-value-a2f8b922.js";import{t as he,h as re,G as we,U as Se,S as $e}from"./transition-c0d64afd.js";let ke=U({props:{onFocus:{type:Function,required:!0}},setup(a){let g=O(!0);return()=>g.value?Q(oe,{as:"button",type:"button",features:be.Focusable,onFocus(f){f.preventDefault();let p,u=50;function s(){var d;if(u--<=0){p&&cancelAnimationFrame(p);return}if((d=a.onFocus)!=null&&d.call(a)){g.value=!1,cancelAnimationFrame(p);return}p=requestAnimationFrame(s)}p=requestAnimationFrame(s)}}):null}});var Te=(a=>(a[a.Forwards=0]="Forwards",a[a.Backwards=1]="Backwards",a))(Te||{}),Ie=(a=>(a[a.Less=-1]="Less",a[a.Equal=0]="Equal",a[a.Greater=1]="Greater",a))(Ie||{});let ue=Symbol("TabsContext");function D(a){let g=Y(ue,null);if(g===null){let f=new Error(`<${a} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(f,D),f}return g}let ee=Symbol("TabsSSRContext"),Ae=U({name:"TabGroup",emits:{change:a=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(a,{slots:g,attrs:f,emit:p}){var u;let s=O((u=a.selectedIndex)!=null?u:a.defaultIndex),d=O([]),c=O([]),y=T(()=>a.selectedIndex!==null),S=T(()=>y.value?a.selectedIndex:s.value);function x(n){var t;let m=M(v.tabs.value,h),w=M(v.panels.value,h),P=m.filter(o=>{var e;return!((e=h(o))!=null&&e.hasAttribute("disabled"))});if(n<0||n>m.length-1){let o=q(s.value===null?0:Math.sign(n-s.value),{[-1]:()=>1,0:()=>q(Math.sign(n),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),e=q(o,{0:()=>m.indexOf(P[0]),1:()=>m.indexOf(P[P.length-1])});e!==-1&&(s.value=e),v.tabs.value=m,v.panels.value=w}else{let o=m.slice(0,n),e=[...m.slice(n),...o].find(de=>P.includes(de));if(!e)return;let i=(t=m.indexOf(e))!=null?t:v.selectedIndex.value;i===-1&&(i=v.selectedIndex.value),s.value=i,v.tabs.value=m,v.panels.value=w}}let v={selectedIndex:T(()=>{var n,t;return(t=(n=s.value)!=null?n:a.defaultIndex)!=null?t:null}),orientation:T(()=>a.vertical?"vertical":"horizontal"),activation:T(()=>a.manual?"manual":"auto"),tabs:d,panels:c,setSelectedIndex(n){S.value!==n&&p("change",n),y.value||x(n)},registerTab(n){var t;if(d.value.includes(n))return;let m=d.value[s.value];d.value.push(n),d.value=M(d.value,h);let w=(t=d.value.indexOf(m))!=null?t:s.value;w!==-1&&(s.value=w)},unregisterTab(n){let t=d.value.indexOf(n);t!==-1&&d.value.splice(t,1)},registerPanel(n){c.value.includes(n)||(c.value.push(n),c.value=M(c.value,h))},unregisterPanel(n){let t=c.value.indexOf(n);t!==-1&&c.value.splice(t,1)}};te(ue,v);let F=O({tabs:[],panels:[]}),A=O(!1);W(()=>{A.value=!0}),te(ee,T(()=>A.value?null:F.value));let B=T(()=>a.selectedIndex);return W(()=>{pe([B],()=>{var n;return x((n=a.selectedIndex)!=null?n:a.defaultIndex)},{immediate:!0})}),me(()=>{if(!y.value||S.value==null||v.tabs.value.length<=0)return;let n=M(v.tabs.value,h);n.some((t,m)=>h(v.tabs.value[m])!==h(t))&&v.setSelectedIndex(n.findIndex(t=>h(t)===h(v.tabs.value[S.value])))}),()=>{let n={selectedIndex:s.value};return Q(fe,[d.value.length<=0&&Q(ke,{onFocus:()=>{for(let t of d.value){let m=h(t);if((m==null?void 0:m.tabIndex)===0)return m.focus(),!0}return!1}}),z({theirProps:{...f,...ge(a,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:n,slots:g,attrs:f,name:"TabGroup"})])}}}),Pe=U({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(a,{attrs:g,slots:f}){let p=D("TabList");return()=>{let u={selectedIndex:p.selectedIndex.value},s={role:"tablist","aria-orientation":p.orientation.value};return z({ourProps:s,theirProps:a,slot:u,attrs:g,slots:f,name:"TabList"})}}}),K=U({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-tabs-tab-${ie()}`}},setup(a,{attrs:g,slots:f,expose:p}){let u=D("Tab"),s=O(null);p({el:s,$el:s}),W(()=>u.registerTab(s)),ne(()=>u.unregisterTab(s));let d=Y(ee),c=T(()=>{if(d.value){let t=d.value.tabs.indexOf(a.id);return t===-1?d.value.tabs.push(a.id)-1:t}return-1}),y=T(()=>{let t=u.tabs.value.indexOf(s);return t===-1?c.value:t}),S=T(()=>y.value===u.selectedIndex.value);function x(t){var m;let w=t();if(w===R.Success&&u.activation.value==="auto"){let P=(m=ye(s))==null?void 0:m.activeElement,o=u.tabs.value.findIndex(e=>h(e)===P);o!==-1&&u.setSelectedIndex(o)}return w}function v(t){let m=u.tabs.value.map(w=>h(w)).filter(Boolean);if(t.key===_.Space||t.key===_.Enter){t.preventDefault(),t.stopPropagation(),u.setSelectedIndex(y.value);return}switch(t.key){case _.Home:case _.PageUp:return t.preventDefault(),t.stopPropagation(),x(()=>N(m,C.First));case _.End:case _.PageDown:return t.preventDefault(),t.stopPropagation(),x(()=>N(m,C.Last))}if(x(()=>q(u.orientation.value,{vertical(){return t.key===_.ArrowUp?N(m,C.Previous|C.WrapAround):t.key===_.ArrowDown?N(m,C.Next|C.WrapAround):R.Error},horizontal(){return t.key===_.ArrowLeft?N(m,C.Previous|C.WrapAround):t.key===_.ArrowRight?N(m,C.Next|C.WrapAround):R.Error}}))===R.Success)return t.preventDefault()}let F=O(!1);function A(){var t;F.value||(F.value=!0,!a.disabled&&((t=h(s))==null||t.focus({preventScroll:!0}),u.setSelectedIndex(y.value),he(()=>{F.value=!1})))}function B(t){t.preventDefault()}let n=xe(T(()=>({as:a.as,type:g.type})),s);return()=>{var t;let m={selected:S.value},{id:w,...P}=a,o={ref:s,onKeydown:v,onMousedown:B,onClick:A,id:w,role:"tab",type:n.value,"aria-controls":(t=h(u.panels.value[y.value]))==null?void 0:t.id,"aria-selected":S.value,tabIndex:S.value?0:-1,disabled:a.disabled?!0:void 0};return z({ourProps:o,theirProps:P,slot:m,attrs:g,slots:f,name:"Tab"})}}}),Ve=U({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(a,{slots:g,attrs:f}){let p=D("TabPanels");return()=>{let u={selectedIndex:p.selectedIndex.value};return z({theirProps:a,ourProps:{},slot:u,attrs:f,slots:g,name:"TabPanels"})}}}),X=U({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-tabs-panel-${ie()}`},tabIndex:{type:Number,default:0}},setup(a,{attrs:g,slots:f,expose:p}){let u=D("TabPanel"),s=O(null);p({el:s,$el:s}),W(()=>u.registerPanel(s)),ne(()=>u.unregisterPanel(s));let d=Y(ee),c=T(()=>{if(d.value){let x=d.value.panels.indexOf(a.id);return x===-1?d.value.panels.push(a.id)-1:x}return-1}),y=T(()=>{let x=u.panels.value.indexOf(s);return x===-1?c.value:x}),S=T(()=>y.value===u.selectedIndex.value);return()=>{var x;let v={selected:S.value},{id:F,tabIndex:A,...B}=a,n={ref:s,id:F,role:"tabpanel","aria-labelledby":(x=h(u.tabs.value[y.value]))==null?void 0:x.id,tabIndex:S.value?A:-1};return!S.value&&a.unmount&&!a.static?Q(oe,{as:"span",...n}):z({ourProps:n,theirProps:B,slot:v,attrs:g,slots:f,features:se.Static|se.RenderStrategy,visible:S.value,name:"TabPanel"})}}});const _e={class:"fixed inset-0 overflow-y-auto"},Ce={class:"flex min-h-full items-center justify-center p-4 text-center"},Oe={class:"text-base text-xl leading-7 text-gray-900"},Fe={class:"mb-4 text-sm leading-6 text-gray-600"},Be={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},Ee={class:"mt-4 flex"},je=["disabled"],Ne={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Ue={key:1},Me={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},ze={class:"mt-4 flex"},De=["disabled"],Le={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Ge={key:1},Ze={key:0,class:"mt-2 text-sm text-green-700"},Re={class:"relative mt-4"},qe={key:0,class:"absolute inset-0 backdrop-blur-sm"},Qe={class:"flex items-center text-sm"},We={class:"mb-6 md:mb-0 md:mr-2"},He=["src"],Je={class:"h5 text-sm mt-3"},Ke={class:"mt-4 flex"},Xe=["disabled"],Ye={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},et={key:1},it={__name:"ProfileModal",props:{user:Object,organization:Object,role:String,isOpen:Boolean},emits:["close"],setup(a,{emit:g}){var B,n,t,m,w,P;const f=a,p=O(!1),u=(o,e)=>{if(o){const i=JSON.parse(o);return(i==null?void 0:i[e])??null}else return null};L().props.config;const s=G({first_name:f.user.first_name,last_name:f.user.last_name,email:f.user.email,phone:f.user.phone});G({organization_name:(B=f.organization)==null?void 0:B.name,address:u((n=f.organization)==null?void 0:n.address,"street"),city:u((t=f.organization)==null?void 0:t.address,"city"),state:u((m=f.organization)==null?void 0:m.address,"state"),zip:u((w=f.organization)==null?void 0:w.address,"zip"),country:u((P=f.organization)==null?void 0:P.address,"country")});const d=G({old_password:null,password:null,password_confirmation:null}),c=G({status:L().props.tfa.enabled,token:null,secret:L().props.tfa.secret}),y=L().props.tfa,S=async o=>{p.value=!0,s.put("./profile/",{preserveScroll:!0,onFinish:()=>{p.value=!1}})},x=async o=>{p.value=!0,d.put("./profile/password",{preserveScroll:!0,onFinish:()=>{p.value=!1}})},v=async o=>{p.value=!0,c.put("/profile/tfa",{preserveScroll:!0,onFinish:()=>{p.value=!1},onSuccess:()=>{le.visit(le.page.url)}})},F=g;function A(){F("close",!0)}return(o,e)=>(V(),H(l($e),{appear:"",show:a.isOpen,as:"template"},{default:$(()=>[b(l(Se),{as:"div",onClose:A,class:"relative z-10"},{default:$(()=>[b(l(re),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:$(()=>[...e[12]||(e[12]=[r("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)])]),_:1}),r("div",_e,[r("div",Ce,[b(l(re),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:$(()=>[b(l(we),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all min-w-[20em]"},{default:$(()=>[r("div",null,[r("h2",Oe,I(o.$t("Personal information")),1),r("p",Fe,I(o.$t("Update your account details and credentials")),1),b(l(Ae),null,{default:$(()=>[b(l(Pe),{class:"flex space-x-1 rounded-xl bg-primary p-1"},{default:$(()=>[b(l(K),{as:"template"},{default:$(({selected:i})=>[r("button",{class:k(["w-full rounded-lg py-2.5 text-sm leading-5 text-[#ffffffcc]","ring-white focus:outline-none",i?"bg-white text-black shadow":"hover:bg-white hover:text-black"])},I(o.$t("My profile")),3)]),_:1}),b(l(K),{as:"template"},{default:$(({selected:i})=>[r("button",{class:k(["w-full rounded-lg py-2.5 text-sm leading-5 text-[#ffffffcc]","ring-white focus:outline-none",i?"bg-white text-black shadow":"hover:bg-white hover:text-black"])},I(o.$t("Security")),3)]),_:1}),l(y).status?(V(),H(l(K),{key:0,as:"template"},{default:$(({selected:i})=>[r("button",{class:k(["w-full rounded-lg py-2.5 text-sm leading-5 text-[#ffffffcc]","ring-white focus:outline-none",i?"bg-white text-black shadow":"hover:bg-white hover:text-black"])},I(o.$t("Two-Factor")),3)]),_:1})):Z("",!0)]),_:1}),b(l(Ve),{class:"mt-2"},{default:$(()=>[b(l(X),null,{default:$(()=>[r("div",Be,[r("form",{onSubmit:e[4]||(e[4]=J(i=>S(),["prevent"])),class:"grid gap-x-6 gap-y-4 sm:grid-cols-6"},[b(j,{modelValue:l(s).first_name,"onUpdate:modelValue":e[0]||(e[0]=i=>l(s).first_name=i),name:o.$t("First name"),error:l(s).errors.first_name,type:"text",class:k("sm:col-span-3")},null,8,["modelValue","name","error"]),b(j,{modelValue:l(s).last_name,"onUpdate:modelValue":e[1]||(e[1]=i=>l(s).last_name=i),name:o.$t("Last name"),error:l(s).errors.last_name,type:"text",class:k("sm:col-span-3")},null,8,["modelValue","name","error"]),b(j,{modelValue:l(s).email,"onUpdate:modelValue":e[2]||(e[2]=i=>l(s).email=i),name:o.$t("Email"),error:l(s).errors.email,type:"text",class:k("sm:col-span-6")},null,8,["modelValue","name","error"]),b(ce,{modelValue:l(s).phone,"onUpdate:modelValue":e[3]||(e[3]=i=>l(s).phone=i),name:o.$t("Phone"),error:l(s).errors.phone,type:"text",class:k("sm:col-span-6")},null,8,["modelValue","name","error"]),r("div",Ee,[r("button",{type:"button",onClick:A,class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},I(o.$t("Cancel")),1),r("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":p.value}]),disabled:p.value},[p.value?(V(),E("svg",Ne,[...e[13]||(e[13]=[r("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),r("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[r("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)])])):(V(),E("span",Ue,I(o.$t("Save")),1))],10,je)])],32)])]),_:1}),b(l(X),null,{default:$(()=>[r("div",Me,[r("form",{onSubmit:e[8]||(e[8]=J(i=>x(),["prevent"])),class:"grid gap-x-6 gap-y-4 sm:grid-cols-6"},[b(j,{modelValue:l(d).old_password,"onUpdate:modelValue":e[5]||(e[5]=i=>l(d).old_password=i),name:o.$t("Old password"),error:l(d).errors.old_password,type:"password",class:k("sm:col-span-6")},null,8,["modelValue","name","error"]),b(j,{modelValue:l(d).password,"onUpdate:modelValue":e[6]||(e[6]=i=>l(d).password=i),name:o.$t("New password"),error:l(d).errors.password,type:"password",class:k("sm:col-span-6")},null,8,["modelValue","name","error"]),b(j,{modelValue:l(d).password_confirmation,"onUpdate:modelValue":e[7]||(e[7]=i=>l(d).password_confirmation=i),name:o.$t("Confirm password"),error:l(d).errors.password_confirmation,type:"password",class:k("sm:col-span-6")},null,8,["modelValue","name","error"]),r("div",ze,[r("button",{type:"button",onClick:A,class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},I(o.$t("Cancel")),1),r("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":p.value}]),disabled:p.value},[p.value?(V(),E("svg",Le,[...e[14]||(e[14]=[r("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),r("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[r("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)])])):(V(),E("span",Ge,I(o.$t("Save")),1))],10,De)])],32)])]),_:1}),l(y).status?(V(),H(l(X),{key:0},{default:$(()=>[r("form",{onSubmit:e[11]||(e[11]=J(i=>v(),["prevent"]))},[b(ve,{name:"Two-factor authentication",modelValue:l(c).status,"onUpdate:modelValue":e[9]||(e[9]=i=>l(c).status=i),options:[{value:1,label:"Enable"},{value:0,label:"Disable"}],error:l(c).errors.status},null,8,["modelValue","error"]),l(y).enabled===1?(V(),E("div",Ze,[...e[15]||(e[15]=[ae(" Two-factor authentication is ",-1),r("b",null,"enabled",-1),ae(". ",-1)])])):Z("",!0),r("div",Re,[l(c).status===0?(V(),E("div",qe)):Z("",!0),e[18]||(e[18]=r("h3",{class:"font-semibold"},"1. Scan QR Code",-1)),e[19]||(e[19]=r("p",{class:"text-gray-600 text-sm"}," Open the authentication app (ex: Authy, Google Authenticator) on your mobile device and scan the following QR Code with your camera. ",-1)),r("div",Qe,[r("div",We,[r("img",{src:l(y).qrcode,alt:"qrcode",width:"200"},null,8,He)]),r("div",null,[e[16]||(e[16]=r("label",null,"Can't scan the QR Code?",-1)),e[17]||(e[17]=r("p",{class:"text-gray-600 text-sm"}," Try inserting the following secret code into your app if you can't scan the QR Code. ",-1)),r("p",Je,I(l(y).secret),1)])]),e[20]||(e[20]=r("h3",{class:"font-semibold"}," 2. Enter Token from Authenticator App ",-1)),e[21]||(e[21]=r("p",{class:"text-sm text-gray-600 mb-2"}," To confirm that you setup your code properly, please enter the 6-digit token from your mobile app. ",-1)),b(j,{modelValue:l(c).token,"onUpdate:modelValue":e[10]||(e[10]=i=>l(c).token=i),placeholder:"6 digit code",error:l(c).errors.token,type:"text",class:k("sm:col-span-6")},null,8,["modelValue","error"])]),r("div",Ke,[r("button",{type:"button",onClick:A,class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},I(o.$t("Cancel")),1),r("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":p.value}]),disabled:p.value},[p.value?(V(),E("svg",Ye,[...e[22]||(e[22]=[r("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),r("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[r("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)])])):(V(),E("span",et,I(o.$t("Save")),1))],10,Xe)])],32)]),_:1})):Z("",!0)]),_:1})]),_:1})])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}};export{it as _};
